var PageJs=new Class.create;
PageJs.prototype=Object.extend(new BPCPageJs,{_getFormFields:function(a,b){return $(a).up(".contentDiv").getElementsBySelector("["+b+"]")},_collectingFields:function(a,b){var c,d;c={};d=!1;this._getFormFields(a,b).each(function(a){a.hasAttribute("required")&&$F(a).blank()?a.up(".form-group").addClassName("has-error"):(a.up(".form-group").removeClassName("has-error"),d=!0);c[a.readAttribute(b)]=$F(a)});return!0===d?c:null},_cleanForm:function(a,b){this._getFormFields(a,b).each(function(a){a.setValue("")});
return this},changePwd:function(a){var b,c,d;b=this;c=b._collectingFields(a,"change_pass");null!==c&&(jQuery("#"+a.id).button("loading"),b.postAjax(b.getCallbackId("changePwd"),c,{onCreate:function(){},onComplete:function(c,e){try{d=b.getResp(e,!1,!0),d.succ&&(b._cleanForm(a,"change_pass"),$(a).insert({before:b.getAlertBox("","Password changed!").addClassName("alert-success")}))}catch(f){$(a).insert({before:b.getAlertBox("Error:",f).addClassName("alert-danger")})}jQuery("#"+a.id).button("reset")}}))},
changePInfo:function(a){var b,c,d;b=this;c=b._collectingFields(a,"change_pinfo");null!==c&&(jQuery("#"+a.id).button("loading"),b.postAjax(b.getCallbackId("changePersonInfo"),c,{onCreate:function(){},onComplete:function(c,e){try{d=b.getResp(e,!1,!0),d.succ&&($(a).insert({before:b.getAlertBox("","Information changed!").addClassName("alert-success")}),location.reload())}catch(f){$(a).insert({before:b.getAlertBox("Error:",f).addClassName("alert-danger")})}jQuery("#"+a.id).button("reset")}}))}});