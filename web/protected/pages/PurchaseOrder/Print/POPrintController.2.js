var PageJs=new Class.create;PageJs.prototype=Object.extend(new BPCPageJs,{_pixels:920,_noColumns:6,genPage:function(e,t,n,l){var a={};if(a.me=this,a.table=e.clone(!0),a.thead=a.table.down("thead").clone(!0),a.table.down("thead").remove(),a.tfoot=a.table.down("tfoot").clone(!0),a.table.down("tfoot").remove(),a.margin=t!=n?"padding-bottom:"+(a.me._pixels-l[l.size()-1])+"px":"padding-bottom:0px",a.newPageDiv=new Element("div",{class:"print-page-wrap",style:"margin: 0;"}).insert({bottom:a.tbody=new Element("table",{id:"main-table",class:"orderview"})}).insert({bottom:new Element("div",{class:"print-page-footer",style:a.margin}).update(a.tfoot.down("tr").wrap(new Element("table",{class:"orderview"}))).insert({bottom:new Element("div",{class:"page-no"}).update(t+"/"+n)})}),a.newPageDiv.insert({top:new Element("div",{class:"print-page-header"}).update(new Element("table",{class:"orderview"}).update(a.thead.innerHTML))}),l.each(function(e){e.className&&e.className.indexOf("summary")<0&&a.tbody.insert({bottom:e})}),l[l.size()-1]<a.me._pixels)for(a.j=Math.floor((a.me._pixels-l[l.size()-1])/34);a.j--;){for(a.emptyTr=new Element("tr",{class:"itemRow"}),a.i=a.me._noColumns;a.i--;)a.emptyTr.insert({bottom:new Element("td").update("&nbsp;")});a.tbody.insert({bottom:a.emptyTr})}return l[l.length-2].className.indexOf("summary")>-1&&(l[l.length-2].setStyle({borderTop:"2px black solid"}),a.tbody.insert({bottom:l[l.length-2]})),a.newPageDiv},formatForPDF:function(){var e={};return e.me=this,e.mainTable=$("main-table").clone(!0),e.pageTrs=[],e.pageRows=[],e.index=e.pixels=0,e.mainTable.down("tbody").getElementsBySelector("tr").each(function(t){e.lenName=t.getElementsBySelector("td.name").length>0?t.getElementsBySelector("td.name")[0].innerHTML.length:0,e.lenSupplier=t.getElementsBySelector("td.supplier").length>0?t.getElementsBySelector("td.supplier")[0].innerHTML.length:0,e.lenSku=t.getElementsBySelector("td.sku").length>0?t.getElementsBySelector("td.sku")[0].innerHTML.length:0,e.numName=Math.ceil(e.lenName/45),e.numSupplier=Math.ceil(e.lenSupplier/15),e.numSku=Math.ceil(e.lenSku/11),e.numSku>=e.numName&&e.numSku>=e.numSupplier?e.linepixels=21*e.numSku+5:e.numSupplier>=e.numSku&&e.numSupplier>=e.numName?e.linepixels=21*e.numSupplier+5:e.linepixels=21*e.numName+5,t.className.indexOf("comment")>=0&&(e.linepixels=40),t.className.indexOf("summary")>=0&&(e.linepixels=220),e.pixels=1*e.pixels+1*e.linepixels,e.pixels>e.me._pixels?(e.pageRows.push(e.pixels-e.linepixels),e.pageTrs.push(e.pageRows.clone(!0)),e.pageRows=[],e.index=e.pixels=0,e.pageRows.push(t),e.pixels=1*e.pixels+1*e.linepixels):(e.pageRows.push(t),e.index=1*e.index+1)}),e.pageRows.size()>0&&(e.pageRows.push(e.pixels),e.pageTrs.push(e.pageRows)),e.wrapper=$("main-table").up().update(""),e.pageNo=1,e.totalPages=e.pageTrs.size(),e.pageTrs.each(function(t){e.wrapper.insert({bottom:e.me.genPage(e.mainTable,e.pageNo++,e.totalPages,t)})}),e.me}});