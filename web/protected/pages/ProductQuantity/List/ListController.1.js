var PageJs=new Class.create();PageJs.prototype=Object.extend(new CRUDPageJs(),{_getTitleRowData:function(){return{type:"Type",from:"From",to:"To",subject:"Subject",body:"Body",status:"Status",created:"Created",updated:"Updated"}},_bindSearchKey:function(){var a={};a.me=this;$("searchPanel").getElementsBySelector("[search_field]").each(function(b){b.observe("keydown",function(c){a.me.keydown(c,function(){$(a.me.searchDivId).down("#searchBtn").click()})})});return this},_getEditPanel:function(b){var a={};a.me=this;a.newDiv=new Element("tr",{"class":"save-item-panel info"}).store("data",b).insert({bottom:new Element("input",{type:"hidden","save-item-panel":"id",value:b.id?b.id:""})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{required:true,"class":"form-control",placeholder:"The name of the Prefer Location Type","save-item-panel":"name",value:b.name?b.name:""})})}).insert({bottom:new Element("td",{"class":"form-group"}).insert({bottom:new Element("input",{"class":"form-control",placeholder:"Optional - The description of the Prefer Location Type","save-item-panel":"description",value:b.description?b.description:""})})}).insert({bottom:new Element("td",{"class":"text-right"}).insert({bottom:new Element("span",{"class":"btn-group btn-group-sm"}).insert({bottom:new Element("span",{"class":"btn btn-success",title:"Save"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-ok"})}).observe("click",function(){a.btn=this;a.me._saveItem(a.btn,$(a.btn).up(".save-item-panel"),"save-item-panel")})}).insert({bottom:new Element("span",{"class":"btn btn-danger",title:"Delete"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-remove"})}).observe("click",function(){if(b.id){$(this).up(".save-item-panel").replace(a.me._getResultRow(b).addClassName("item_row").writeAttribute("item_id",b.id))}else{$(this).up(".save-item-panel").remove()}})})})});return a.newDiv},_getResultRow:function(c,a){var b={};b.me=this;b.tag=(b.isTitle===true?"th":"td");b.isTitle=(a||false);b.row=new Element("tr",{"class":(b.isTitle===true?"":"btn-hide-row")}).store("data",c).insert({bottom:new Element(b.tag,{"class":"name col-xs-1"}).update(c.type)}).insert({bottom:new Element(b.tag,{"class":"name col-xs-1"}).update(c.from)}).insert({bottom:new Element(b.tag,{"class":"name col-xs-1"}).update(c.to)}).insert({bottom:new Element(b.tag,{"class":"name col-xs-1"}).update(c.subject)}).insert({bottom:new Element(b.tag,{"class":"name col-xs-3"}).update(c.body)}).insert({bottom:new Element(b.tag,{"class":"name col-xs-1"}).update(c.status)}).insert({bottom:new Element(b.tag,{"class":"name col-xs-2"}).update(c.created)}).insert({bottom:new Element(b.tag,{"class":"name col-xs-2"}).update(c.updated)}).insert({bottom:new Element(b.tag,{"class":"text-right btns col-xs-2 hidden"}).update(b.isTitle===true?(new Element("span",{"class":"btn btn-primary btn-xs",title:"New"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-plus"})}).insert({bottom:" NEW"}).observe("click",function(){$(this).up("thead").insert({bottom:b.newEditEl=b.me._getEditPanel({})});b.newEditEl.down(".form-control[save-item-panel]").focus();b.newEditEl.down(".form-control[save-item-panel]").select();b.newEditEl.getElementsBySelector(".form-control[save-item-panel]").each(function(d){d.observe("keydown",function(e){b.me.keydown(e,function(){b.newEditEl.down(".btn-success span").click()});return false})})})):(new Element("span",{"class":"btn-group btn-group-xs"}).insert({bottom:new Element("span",{"class":"btn btn-default",title:"Edit"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-pencil"})}).observe("click",function(){$(this).up(".item_row").replace(b.editEl=b.me._getEditPanel(c));b.editEl.down(".form-control[save-item-panel]").focus();b.editEl.down(".form-control[save-item-panel]").select();b.editEl.getElementsBySelector(".form-control[save-item-panel]").each(function(d){d.observe("keydown",function(e){b.me.keydown(e,function(){b.editEl.down(".btn-success span").click()});return false})})})}).insert({bottom:new Element("span",{"class":"btn btn-danger",title:"Delete"}).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-trash"})}).observe("click",function(){if(!confirm("Are you sure you want to delete this item?")){return false}b.me._deleteItem(c)})})))});return b.row}});