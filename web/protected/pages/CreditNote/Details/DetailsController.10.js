var PageJs=new Class.create;
PageJs.prototype=Object.extend(new BPCPageJs,{_htmlIds:{itemDiv:"",searchPanel:"search_panel"},_customer:null,_item:null,_searchTxtBox:null,_applyToOptions:null,setHTMLIDs:function(a){this._htmlIds.itemDiv=a;return this},_submitOrder:function(a,b){var c,d,e,f,g,k,h,l,m;c=this;d=$(a).up(".modal-content");d||(c.showModalBox("saving...",new Element("div",{"class":"confirm-div"})),d=$$(".modal-content").first());e=d.down(".modal-title");f=e.clone(!0);g=d.down(".modal-body");k=(new Element("div")).update('<h4>Submitting the data, please be patient.</h4><div><h3 class="fa fa-spinner fa-spin"></h3></div>');
c.postAjax(c.getCallbackId("saveOrder"),b,{onLoading:function(a,c){e.update("Submiting data, please wait...");g.insert({bottom:k});g.down(".confirm-div").hide().getElementsBySelector(".result-msg").each(function(a){a.remove()})},onSuccess:function(a,b){try{if((h=c.getResp(b,!1,!0))&&h.item&&h.redirectURL&&(c._item=h.item,jQuery("#"+c.modalId).on("hide.bs.modal",function(){window.location=h.redirectURL}),c.disableAll(),e.update('<strong class="text-success">Success!</strong>'),l=(new Element("div",
{"class":"panel"})).insert({bottom:(new Element("h4",{"class":"text-success"})).update("Saved Successfully.")}).insert({bottom:(new Element("div")).update((new Element("div",{"class":"btn btn-primary col-xs-6 col-xs-offset-3"})).update("OK").observe("click",function(){window.location=h.redirectURL}))}),g.update(l),h.printURL&&(m=window.open(h.printURL,"Printing Order","width=1300, location=no, scrollbars=yes, menubar=no, status=no, titlebar=no, fullscreen=no, toolbar=no"),!m)))throw'<h4>Your browser has block the popup window, please enable it for further operations.</h4><a href="'+
h.printURL+'" target="_BLANK"> click here for now</a>';}catch(d){e.replace(f),g.down(".confirm-div").insert({top:c.getAlertBox("",d).addClassName("alert-danger result-msg")}).show()}},onComplete:function(a,c){k.remove()}});return c},disableAll:function(a){a=a||!1;jQuery("input").attr("disabled",!0);jQuery("textarea").attr("disabled",!0);jQuery(".btn").attr("disabled",!0);jQuery(".form-control").attr("disabled",!0);!1!==a&&(window.location=document.URL)},_getShowStatusSelBox:function(a){var b,c,d,
e,f;b=a||!1;return(new Element("span",{"class":"form-group"})).insert({bottom:(new Element("select",{"class":"parts-confirm-status",required:!0})).insert({bottom:(new Element("option",{value:""})).update("")}).insert({bottom:(new Element("option",{value:"StockOnHand",title:"Goods will be return to StockOnHand"})).update("BrandNew, sealed")}).insert({bottom:(new Element("option",{value:"StockOnRMA",title:"Goods will be return to StockOnRMA"})).update("UnSealed / Not Sure")}).observe("change",function(){c=
"";d=$(this).selectedIndex;0<=d&&(c=$(this).options[d].title);!0===b?$(this).up(".parts-confirm-table").down("tbody").getElementsBySelector(".parts-confirm-status").each(function(a){a.options[d].selected=!0;a.insert({after:(new Element("small",{"class":"msg"})).update((new Element("em")).update(c))})}):(e=$(this).up(),e.down(".msg")&&e.down(".msg").remove(),e.insert({bottom:(new Element("small",{"class":"msg"})).update((new Element("em")).update(c))}),(f=e.up(".table").down("thead .parts-confirm-status"))&&
f.selectedIndex!==d&&(f.options[0].selected=!0))})})},_getConfirmPartsTable:function(a,b){var c,d,e,f;c=this;d=b||!1;e=(new Element("table",{"class":"table table-hover table-condensed parts-confirm-table"})).insert({bottom:(new Element("thead")).insert({bottom:(new Element("tr")).insert({bottom:(new Element("th",{"class":"col-xs-4"})).update("Product")}).insert({bottom:(new Element("th",{"class":"col-xs-2"})).update("Qty")}).insert({bottom:!0!==d?"":(new Element("th")).update("All: ").insert({bottom:c._getShowStatusSelBox(!0)})})})}).insert({bottom:f=
new Element("tbody")});a.each(function(a){f.insert({bottom:(new Element("tr",{"class":"parts-confirm-row"})).store("data",a).insert({bottom:(new Element("td")).update(a.product.sku)}).insert({bottom:(new Element("td")).update(a.qtyOrdered)}).insert({bottom:!0!==d?"":(new Element("td")).update(c._getShowStatusSelBox())})})});return e},_confirmSubmit:function(a,b,c){var d,e,f,g,k,h;d=this;a=$(a).up(".modal-content");a.down(".modal-title").update('<strong class="text-success">Please confirm the condition of returned goods</strong>');
c=(new Element("div",{"class":"panel confirm-div"})).insert({bottom:(new Element("div")).insert({bottom:(new Element("h4",{"class":"text-success"})).update("What are the confiditions of these returned goods?")}).insert({bottom:e=d._getConfirmPartsTable(c,!0)})}).insert({bottom:(new Element("div")).insert({bottom:(new Element("div",{"class":"btn btn-primary"})).update("Save").observe("click",function(){f=this;g=!1;k=0;e.getElementsBySelector(".parts-confirm-row").each(function(a){if(h=a.down(".parts-confirm-status"))$F(h).blank()?
(g=!0,d._markFormGroupError(h,"Select one please.")):b.items[k]&&(b.items[k].stockData=$F(h));k=1*k+1});!1===g&&d._submitOrder(f,b)})}).insert({bottom:(new Element("div",{"class":"btn btn-default pull-right"})).update("Cancel").observe("click",function(){d.hideModalBox()})})});a.down(".modal-body").update(c);return d},_getConfirmGoodsReturnedPanel:function(a,b){var c,d;c=this;return(new Element("div",{"class":"confirm-div"})).insert({bottom:(new Element("div")).insert({bottom:(new Element("h4",{"class":"text-warning"})).update("Have the customer returned all the goods on this credit note already?")}).insert({bottom:c._getConfirmPartsTable(b)})}).insert({bottom:(new Element("div")).insert({bottom:(new Element("span",
{"class":"btn btn-primary"})).update("YES").observe("click",function(){c._confirmSubmit(this,a,b)})}).insert({bottom:(new Element("span",{"class":"btn btn-default pull-right"})).update("NO").observe("click",function(){d=$(this).up(".modal-content");d.down(".modal-title").update('<strong class="text-danger">Stop Now!</strong>');d.down(".modal-body").update("").insert({bottom:(new Element("div",{"class":"panel"})).insert({bottom:(new Element("div")).update('<h4 class="text-danger">You need to create a RMA '+
(c._order&&c._order.orderNo?'<a href="/orderdetails/'+c._order.id+'.html" target="_BLANK">'+c._order.orderNo+"</a>":"")+" first, and waiting until the goods are back then create a credit note against those returned goods!</h4>")}).insert({bottom:(new Element("div")).insert({bottom:(new Element("div",{"class":"btn btn-primary col-sm-6 col-sm-offset-3"})).update("OK").observe("click",function(){c.hideModalBox()})})})})})})})},_getValueExceededPanel:function(a,b,c,d){var e,f;e=this;f=e._order.totalAmount-
e._order.totalCreditNoteValue;return(new Element("div",{"class":"confirm-div"})).insert({bottom:(new Element("div")).insert({bottom:(new Element("div",{"class":"text-warning"})).update(e.getAlertBox("Warning: ","<strong>Exeeded Total Creditable Value("+e.getCurrency(f)+') of this order: </strong><a href="/orderdetails/'+e._order.id+'.html" target="_BLANK">'+e._order.orderNo+"</a><div>Order Total Value: "+e.getCurrency(e._order.totalAmount)+"</div><div>Order Total Credited Value: "+e.getCurrency(e._order.totalCreditNoteValue)+
"</div><div>Order Total Creditable Value: "+e.getCurrency(f)+"</div><div>Current CreditNote Value: <strong>"+e.getCurrency(d)+"</div>").addClassName("alert-danger"))})}).insert({bottom:(new Element("div")).update("Are you sure you want to continue?")}).insert({bottom:(new Element("div")).insert({bottom:(new Element("span",{"class":"btn btn-primary"})).update("YES, continue").observe("click",function(){e._confirmOrderAgainShipments(this,a,b,c)})}).insert({bottom:(new Element("span",{"class":"btn btn-default pull-right"})).update("NO").observe("click",
function(){e.hideModalBox()})})})},_confirmOrderAgainShipments:function(a,b,c,d){if(this._order.shippments&&0<this._order.shippments.size())return this.hideModalBox(),this.showModalBox("You're about to save a credit note for : "+this._customer.name,this._getConfirmGoodsReturnedPanel(c,d)),this;c.printIt=!0===b?!0:!1;this._submitOrder(a,c);return this},_preConfirmSubmit:function(a,b){var c,d,e,f,g;c=this._collectFormData($(this._htmlIds.itemDiv),"save-order");c.totalPaidAmount=this.getValueFromCurrency(c.totalPaidAmount);
if(null===c)return null;if(c.applyTo.blank())return this.hideModalBox(),this.showModalBox("Warning","You MUST select what this credit note is <strong>Apply To</strong>"),null;c.printIt=!0===b?!0:!1;c.customer={id:this._customer.id};c.creditNoteId=this._creditNote&&this._creditNote.id?this._creditNote.id:"";c.orderId=this._order&&this._order.id?this._order.id:"";if(d=$$(".shipping-address.address-div").first()){d=this._collectFormData(d,"address-editable-field");if(null===d)return this.hideModalBox(),
this.showModalBox("Warning","some error in the shipping address"),null;c.shippingAddr=d}c.items=[];e=[];$$(".order-item-row").each(function(a){f=a.retrieve("data");e.push(f);c.items.push({orderItemId:a.readAttribute("orderItemId"),creditNoteItemId:a.readAttribute("creditNoteItemId"),valid:a.visible(),product:{id:f.product.id,name:f.product.name,sku:f.product.sku},itemDescription:f.itemDescription,unitPrice:f.unitPrice,qtyOrdered:f.qtyOrdered,totalPrice:f.totalPrice,serials:a.retrieve("serials")})});
g=!0;c.items.each(function(a){!0===g&&!0===a.valid&&(g=!1)});if(!0===g)return this.hideModalBox(),this.showModalBox('<strong class="text-danger">Error</strong>',"<strong>At least one Credit Note Item</strong> is needed!",!0),null;if(!this._order||!this._order.id)return this.hideModalBox(),this.showModalBox("You're about to save a credit note for : "+this._customer.name,this._getConfirmGoodsReturnedPanel(c,e)),this;d=this.getValueFromCurrency(jQuery('[order-price-summary="totalPriceIncludeGST"]').val());
if(d>1*this._order.totalAmount-1*this._order.totalCreditNoteValue)return this.hideModalBox(),this.showModalBox("You're about to save a credit note for : "+this._customer.name,this._getValueExceededPanel(b,c,e,d)),this;this._confirmOrderAgainShipments(a,b,c,e);return this},_checkOrderItems:function(a){var b,c;b=this;c=!1;b._order.items.each(function(d){switch(a){case "anyPicked":!1===c&&!0===d.isPicked&&(c=!0);break;default:b.showModalBox("<strong>Error</strong>","Invalid Job"+a+" passed to tmp.me._checkOrderItems")}});
return c},_saveBtns:function(){var a,b;a=this;b=(new Element("div")).insert({bottom:(new Element("div",{"class":"btn-group pull-right  visible-xs visible-sm visible-md visible-lg"})).insert({bottom:(new Element("span",{"class":"btn btn-primary save-btn"})).insert({bottom:(new Element("span")).update(" Save ")}).observe("click",function(){a._preConfirmSubmit(this)})})}).insert({bottom:(new Element("div",{"class":"btn btn-default"})).setStyle("display: none;").insert({bottom:new Element("span",{"class":"glyphicon glyphicon-remove-sign"})}).insert({bottom:(new Element("span")).update(" cancel ")}).observe("click",
function(){a.showModalBox('<strong class="text-danger">Cancelling the current order</strong>','<div>You are about to cancel this new order, all input data will be lost.</div><br /><div>Continue?</div><div><span class="btn btn-primary" onclick="window.location = document.URL;"><span class="glyphicon glyphicon-ok"></span> YES</span><span class="btn btn-default pull-right" data-dismiss="modal"><span aria-hidden="true"><span class="glyphicon glyphicon-remove-sign"></span> NO</span></span></div>',!0)})});
b.down(".btn-group").removeClassName("btn-group");return b},_addNewProductRow:function(a){var b,c,d,e,f,g;a=$(a).up(".new-order-item-input");if(b=a.retrieve("product"))if(c=a.down("[new-order-item=unitPrice]"),d=this.getValueFromCurrency($F(c)),null===d.match(/^\d+(\.\d{1,2})?$/))this._markFormGroupError(c,"Invalid value provided!");else if(e=a.down("[new-order-item=qtyOrdered]"),c=this.getValueFromCurrency($F(e)),null===c.match(/^\d+(\.\d{1,2})?$/))this._markFormGroupError(e,"Invalid value provided!");
else if(f=a.down("[new-order-item=discount]"),e=this.getValueFromCurrency($F(f)),null===e.match(/^\d+(\.\d{1,2})?$/))this._markFormGroupError(f,"Invalid value provided!");else if(g=a.down("[new-order-item=totalPrice]"),f=this.getValueFromCurrency($F(g)),null===f.match(/^\d+(\.\d{1,2})?$/))this._markFormGroupError(g,"Invalid value provided!");else return a.getElementsBySelector(".form-group.has-error .form-control").each(function(a){$(a).retrieve("clearErrFunc")()}),g=$F(a.down("[new-order-item=itemDescription]")).replace(/\n/g,
"<br />"),b={product:b,itemDescription:g,unitPrice:this.getCurrency(d),qtyOrdered:c,discount:e,margin:this.getCurrency(parseFloat(f)-parseFloat(1.1*b.unitCost*c)),totalPrice:this.getCurrency(f)},a.up(".list-group").insert({bottom:this._getProductRow(b)}),b=this._getNewProductRow(),a.replace(b).addClassName(),b.down("[new-order-item=product]").focus(),this._recalculateSummary(),this;else b=a.down("[new-order-item=product]"),a.down("[new-order-item=product]")?this._markFormGroupError(b,"Select a product first!"):
this.showModalBox("Product Needed","Select a product first!",!0)},_searchProduct:function(a,b,c){var d,e,f,g,k,h,l,m;d=this;e=!0===$(a).retrieve("showMore")?!0:!1;f=b||1;d._signRandID(a);g=$(a).up(".product-autocomplete")&&$(a).up(".product-autocomplete").down(".search-txt")?$(a).up(".product-autocomplete").down(".search-txt"):$($(a).retrieve("searchBoxId"));d._signRandID(g);k=$F(g);d.postAjax(d.getCallbackId("searchProduct"),{searchTxt:k,pageNo:f},{onLoading:function(){jQuery("#"+a.id).button("loading");
jQuery("#"+g.id).button("loading")},onSuccess:function(b,n){h=!1===e?new Element("div",{"class":"search-product-list"}):$(a).up(".search-product-list");try{l=d.getResp(n,!1,!0);if(!l||!l.items||0===l.items.size())throw"Nothing Found for: "+k;d._signRandID(g);l.items.each(function(a){h.insert({bottom:d._getSearchPrductResultRow(a,g)})});h.addClassName("list-group")}catch(p){h.update(d.getAlertBox("Error: ",p).addClassName("alert-danger"))}"function"===typeof c&&c();l.pagination.pageNumber<l.pagination.totalPages&&
h.insert({bottom:(new Element("a",{"class":"item-group-item"})).insert({bottom:(new Element("span",{"class":"btn btn-primary","data-loading-text":"Getting more ..."})).update("Show Me More")}).observe("click",function(){m=$(this);$(m).store("searchBoxId",g.id);$(m).store("showMore",!0);d._searchProduct(this,1*f+1,function(){$(m).remove()})})});!1===e&&d.showModalBox("Products that has: "+k,h,!1)},onComplete:function(c,b){jQuery("#"+a.id).button("reset");jQuery("#"+g.id).button("reset")}});return d},
_getSearchPrductResultRow:function(a,b){var c,d,e,f;c=this;return d=(new Element("a",{"class":"list-group-item search-product-result-row",href:"javascript: void(0);"})).store("data",a).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-xs-2"})).insert({bottom:(new Element("div",{"class":"thumbnail"})).insert({bottom:new Element("img",{"data-src":"holder.js/100%x64",alert:"Product Image",src:0===a.images.size()?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+":
a.images[0].asset.url})})})}).insert({bottom:(new Element("div",{"class":"col-xs-10"})).insert({bottom:(new Element("strong")).update((new Element("a",{href:"/product/"+a.id+".html",target:"_BLANK"})).update(a.name)).insert({bottom:(new Element("small",{"class":"pull-right"})).update("SKU: "+a.sku)})}).insert({bottom:(new Element("div")).insert({bottom:(new Element("small")).update(a.shortDescription)})}).insert({bottom:(new Element("div")).insert({bottom:(new Element("small",{"class":"col-xs-4"})).insert({bottom:(new Element("div",
{"class":"input-group",title:"stock on HAND"})).insert({bottom:(new Element("span",{"class":"input-group-addon"})).update("SOH:")}).insert({bottom:(new Element("strong",{"class":"form-control"})).update(a.stockOnHand)})})}).insert({bottom:(new Element("small",{"class":"col-xs-4"})).insert({bottom:(new Element("div",{"class":"input-group",title:"stock on ORDER"})).insert({bottom:(new Element("span",{"class":"input-group-addon"})).update("SOO:")}).insert({bottom:(new Element("strong",{"class":"form-control"})).update(a.stockOnOrder)})})}).insert({bottom:(new Element("small",
{"class":"col-xs-4"})).insert({bottom:(new Element("div",{"class":"input-group",title:"stock on PO"})).insert({bottom:(new Element("span",{"class":"input-group-addon"})).update("SOP:")}).insert({bottom:(new Element("strong",{"class":"form-control"})).update(a.stockOnPO)})})})})})}).observe("click",function(){e=$(b).up(".new-order-item-input").store("product",a);b.up(".productName").writeAttribute("colspan",!1).update((new Element("a",{href:"/product/"+a.id+".html",target:"_BLANK"})).update(a.sku)).removeClassName("col-xs-8").addClassName("col-xs-3").insert({bottom:(new Element("a",
{href:"javascript: void(0);","class":"text-danger pull-right",title:"click to change the product"})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-remove"})}).observe("click",function(){d=c._getNewProductRow();$(this).up(".new-order-item-input").replace(d);d.down("[new-order-item=product]").select()})}).insert({after:(new Element("div",{"class":"col-xs-5"})).update((new Element("textarea",{"new-order-item":"itemDescription"})).setStyle("width: 100%").update(a.name))});jQuery("#"+
c.modalId).modal("hide");f=0===a.prices.size()?0:a.prices[0].price;e.down("[new-order-item=unitPrice]").writeAttribute("value",c.getCurrency(f)).select();c._calculateNewProductPrice(e)})},_selectProduct:function(a){var b,c;b=a.qty?a.qty:a.qtyOrdered;c=a.unitPrice*b;c=0==Math.ceil(c)?0:Math.round(100*(c-a.totalPrice)/c);a={product:a.product,itemDescription:a.itemDescription,unitPrice:this.getCurrency(a.unitPrice),qtyOrdered:b,discount:c+"%",margin:0,totalPrice:this.getCurrency(a.totalPrice)};$$(".order_change_details_table").first().insert({bottom:a=
this._getProductRow(a)});this._recalculateSummary();return a},_getSummaryFooter:function(){var a,b,c,d,e,f,g;a=this;b=!(a._creditNote&&a._creditNote.id);c=(new Element("select",{"class":"select2 form-control input-sm","save-order":"applyTo","data-placeholder":"Select an option"})).insert({bottom:(new Element("option",{value:""})).update("")});a._applyToOptions.each(function(b){c.insert({bottom:d=(new Element("option",{value:b})).update(b)});a._creditNote&&a._creditNote.applyTo==b&&d.writeAttribute("selected",
!0)});e=b?(new Element("select",{"class":"form-control input-sm","save-order":"paymentMethodId"})).insert({bottom:(new Element("option",{value:""})).update("Paid Via:")}):"Total Paid";b&&(a._paymentMethods.each(function(a){e.insert({bottom:(new Element("option",{value:a.id})).update(a.name)})}),e.observe("change",function(){f=this;$(f).up(".row").down(".input-field").update($F(f).blank()?a.getCurrency(0):(new Element("span",{"class":"form-group"})).update(g=(new Element("input",{value:"5"===$F(f).strip()?
"0":"","order-price-summary":"totalPaidAmount","class":"form-control input-sm","save-order":"totalPaidAmount",placeholder:a.getCurrency(0),required:!0,validate_currency:"Invalid number provided!"})).observe("keyup",function(){a._recalculateSummary()})));a._recalculateSummary();g&&g.select()}));a.paymentListPanelJs=new PaymentListPanelJs(a,void 0,a._creditNote,!0,!1);return(new Element("div",{"class":"panel-footer"})).insert({bottom:(new Element("div",{"class":"row list-group-item-danger"})).insert({bottom:(new Element("div",
{"class":b?"col-sm-8":"col-sm-4"})).insert({bottom:a._getFormGroup("Description:",(new Element("textarea",{"save-order":"description",rows:5})).update(a._creditNote?a._creditNote.description:""))})}).insert({bottom:b?"":(new Element("div",{"class":"col-sm-4"})).insert({bottom:a.paymentListPanelJs.getPaymentListPanel()})}).insert({bottom:(new Element("div",{"class":"col-sm-4"})).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Total Excl. GST: "))}).insert({bottom:(new Element("div",
{"class":"col-xs-6","order-price-summary":"totalPriceExcludeGST"})).update(a.getCurrency(0))})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Total GST: "))}).insert({bottom:(new Element("div",{"order-price-summary":"totalPriceGST","class":"col-xs-6"})).update(a.getCurrency(0))})}).insert({bottom:(new Element("div",{"class":"row",style:"border-bottom: 1px solid brown"})).insert({bottom:(new Element("div",
{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Total Discount:"))}).insert({bottom:(new Element("div",{"order-price-summary":"totalDiscount","class":"col-xs-6"})).update(a.getCurrency(0))})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Sub Total Incl. GST: "))}).insert({bottom:(new Element("div",{"order-price-summary":"totalPriceIncludeGST","class":"col-xs-6"})).update(a.getCurrency(0))})}).insert({bottom:(new Element("div",
{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Shipping Cost: "))}).insert({bottom:a._getShippingCostBox(a._creditNote&&a._creditNote.id?a._creditNote.shippingValue:a._order&&a._order.infos["14"]?a.getValueFromCurrency(a._order.infos[14][0].value):0)})}).insert({bottom:(new Element("div",{"class":"row",style:"border-bottom: 1px solid brown"})).insert({bottom:(new Element("div",{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Apply To: "))}).insert({bottom:(new Element("div",
{"class":"col-xs-6"})).update((new Element("strong")).update(c))})}).insert({bottom:(new Element("div",{"class":"row",style:"border-bottom: 1px solid brown"})).insert({bottom:(new Element("div",{"class":"col-xs-6 text-right"})).update((new Element("strong")).update(e))}).insert({bottom:(new Element("div",{"class":"col-xs-6 input-field"})).update(a.getCurrency(b?0:a._creditNote.totalPaid))})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Total Incl. GST:"))}).insert({bottom:(new Element("strong",
{"order-price-summary":"subTotal","class":"col-xs-6"})).update(a.getCurrency(0))})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("h4",{"class":"col-xs-6 text-right"})).setStyle("color: #d30014 !important").update((new Element("strong")).update("DUE:"))}).insert({bottom:(new Element("h4",{"class":"col-xs-6","order-price-summary":"total-payment-due"})).setStyle("color: #d30014 !important").update(a.getCurrency(0))})}).insert({bottom:(new Element("div",{"class":"row margin"})).setStyle("display: none;").insert({bottom:(new Element("strong",
{"class":"col-xs-6 text-right"})).update((new Element("strong")).update("Margin Total Incl. GST:"))}).insert({bottom:(new Element("strong",{"class":"col-xs-6","order-price-summary":"total-margin"})).update(a.getCurrency(0))})})})})},_getNewProductProductAutoComplete:function(){var a,b,c;a=this;b=a._getFormGroup(null,(new Element("div",{"class":"input-group input-group-sm product-autocomplete"})).insert({bottom:(new Element("input",{"class":"form-control search-txt visible-xs visible-sm visible-md visible-lg init-focus",
"new-order-item":"product",required:!0,placeholder:"search SKU, NAME and any BARCODE for this product"})).observe("keyup",function(b){c=this;a.keydown(b,function(){$(c).up(".product-autocomplete").down(".search-btn").click()})}).observe("keydown",function(b){c=this;a.keydown(b,function(){$(c).up(".product-autocomplete").down(".search-btn").click()},function(){},Event.KEY_TAB)})}).insert({bottom:(new Element("span",{"class":"input-group-btn"})).insert({bottom:(new Element("span",{"class":" btn btn-primary search-btn",
"data-loading-text":"searching..."})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-search"})}).observe("click",function(){$F($(this).up(".product-autocomplete").down(".search-txt")).blank()?$(this).up(".product-autocomplete").down(".search-txt").focus():a._searchProduct(this)})})}));b.down(".input-group").removeClassName("form-control");return b},_getNewProductRow:function(){var a,b,c,d;a=this;b={product:{name:a._getNewProductProductAutoComplete()},unitPrice:a._getFormGroup(null,
(new Element("input",{"class":"input-sm","new-order-item":"unitPrice",required:!0,value:a.getCurrency(0)})).observe("click",function(){$(this).select()}).observe("keydown",function(b){a._bindSubmitNewProductRow(b,this)}).observe("keyup",function(){a._calculateNewProductPrice($(this).up(".item_row"))})),qtyOrdered:a._getFormGroup(null,(new Element("input",{"class":"input-sm","new-order-item":"qtyOrdered",required:!0,value:"1"})).observe("keyup",function(){a._calculateNewProductPrice($(this).up(".item_row"))}).observe("keydown",
function(b){a._bindSubmitNewProductRow(b,this)}).observe("click",function(){$(this).select()})),discount:a._getFormGroup(null,(new Element("input",{"class":"input-sm","new-order-item":"discount",value:"0"})).observe("keyup",function(){if($F($(this)).blank()||100<$F($(this)))$(this).value=0,$(this).select();a._calculateNewProductPrice($(this).up(".item_row"))}).observe("keydown",function(b){a._bindSubmitNewProductRow(b,this)}).observe("click",function(){$(this).select()})),totalPrice:a._getFormGroup(null,
new Element("input",{"class":"input-sm",disabled:!0,"new-order-item":"totalPrice",required:!0,value:a.getCurrency(0)})),margin:a.getCurrency(0),btns:(new Element("span",{"class":"btn-group btn-group-sm pull-right"})).insert({bottom:(new Element("span",{"class":"btn btn-primary"})).insert({bottom:new Element("span",{"class":" glyphicon glyphicon-floppy-saved save-new-product-btn"})}).observe("click",function(){a._addNewProductRow(this)})}).insert({bottom:(new Element("span",{"class":"btn btn-default"})).insert({bottom:new Element("span",
{"class":"glyphicon glyphicon-floppy-remove"})}).observe("click",function(){confirm("You about to clear this entry. All input data for this entry will be lost.\n\nContinue?")&&(c=a._getNewProductRow(),d=$(this).up(".new-order-item-input"),d.getElementsBySelector(".form-group.has-error .form-control").each(function(a){$(a).retrieve("clearErrFunc")()}),d.replace(c),c.down("[new-order-item=product]").focus())})})};return a._getProductRow(b,!1).addClassName("new-order-item-input list-group-item-danger").removeClassName("order-item-row")},
_getProductRow:function(a,b){var c,d,e,f,g,k,h;c=this;d=b||!1;e=!0===d?"strong":"div";f=a.btns?a.btns:(new Element("span",{"class":"pull-right"})).insert({bottom:(new Element("span",{"class":"btn btn-danger btn-xs item-del-btn"})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-trash"})}).observe("click",function(){confirm("You remove this entry.\n\nContinue?")&&((g=$(this).up(".item_row"))&&(jQuery.isNumeric(g.readAttribute("creditNoteItemId"))?g.hide():g.remove()),c._recalculateSummary())})});
g=(new Element("div",{"class":" list-group-item "+(!0===d?"list-group-item-danger":"item_row order-item-row")})).store("data",a).insert({bottom:(new Element("div",{"class":"row"})).store("data",a).insert({bottom:(new Element(e,{"class":"productName col-xs-8"})).insert({bottom:a.itemDescription?a.itemDescription:a.product.name})}).insert({bottom:(new Element(e,{"class":"uprice col-xs-1"})).insert({bottom:a.unitPrice})}).insert({bottom:(new Element(e,{"class":"col-xs-1"})).insert({bottom:(new Element("div")).insert({bottom:(new Element("div",
{"class":"qty col-xs-6"})).update(a.qtyOrdered)}).insert({bottom:(new Element("div",{"class":"discount col-xs-6"})).update(a.discount)})})}).insert({bottom:(new Element(e,{"class":"tprice col-xs-1"})).insert({bottom:a.totalPrice})}).insert({bottom:(new Element(e,{"class":"margin col-xs-1 text-right"})).update(a.margin).setStyle("display: none;")}).insert({bottom:(new Element(e,{"class":"btns col-xs-1 text-right"})).update(f)})});a.product.sku&&g.down(".productName").removeClassName("col-xs-8").addClassName("col-xs-6").insert({before:(new Element(e,
{"class":"productSku col-xs-2"})).update(!0===d?"SKU":(new Element("a",{href:"/product/"+a.product.id+".html",target:"_BLANK"})).update(a.product.sku))});a.scanTable&&g.insert({bottom:(new Element("div",{"class":"row product-content-row"})).insert({bottom:(new Element("span",{"class":"col-sm-2 show-tools"})).insert({bottom:(new Element("input",{type:"checkbox",checked:!0,"class":"show-panel-check"})).observe("click",function(){k=this;h=$(k).up(".product-content-row").down(".serial-no-scan-pane");
k.checked?h.show():h.hide()})}).insert({bottom:(new Element("a",{href:"javascript: void(0);"})).update(" show serial scan panel?").observe("click",function(){$(this).up(".show-tools").down(".show-panel-check").click()})})}).insert({bottom:(new Element("span",{"class":"col-sm-10 serial-no-scan-pane",style:"padding-top: 5px"})).update(a.scanTable)})});return g},_getPartsTable:function(){var a;a=(new Element("div",{"class":"list-group order_change_details_table"})).insert({bottom:this._getProductRow({product:{sku:"SKU",
name:"Description"},unitPrice:"Unit Price<div><small>(inc GST)</small><div>",qtyOrdered:"Qty",margin:"Margin",discount:"Disc. %",totalPrice:"Total Price<div><small>(inc GST)</small><div>",btns:(new Element("div")).setStyle("display:none;").insert({bottom:(new Element("label",{"for":"hide-margin-checkbox"})).update("Show Margin ")}).insert({bottom:(new Element("input",{id:"hide-margin-checkbox",type:"checkbox",checked:!0})).observe("click",function(){jQuery(".margin").toggle()})})},!0)});a.insert({bottom:this._getNewProductRow().addClassName("list-group-item-danger")});
return a},_getAddressDiv:function(a,b,c){var d;d=b||null;c=c||!1;a=(new Element("div",{"class":"address-div"})).insert({bottom:(new Element("strong")).update(a)}).insert({bottom:(new Element("dl",{"class":"dl-horizontal dl-condensed"})).insert({bottom:(new Element("dt")).update(new Element("span",{"class":"glyphicon glyphicon-user",title:"Customer Name"}))}).insert({bottom:(new Element("dd")).insert({bottom:(new Element("div")).insert({bottom:(new Element("div",{"class":"col-sm-6"})).update(!0!==
c?b.contactName:new Element("input",{"address-editable-field":"contactName","class":"form-control input-sm",placeholder:"The name of contact person",value:d.contactName?d.contactName:""}))}).insert({bottom:(new Element("div",{"class":"col-sm-6"})).update(!0!==c?b.contactNo:new Element("input",{"address-editable-field":"contactNo","class":"form-control input-sm",placeholder:"The contact number of contact person",value:d.contactNo?d.contactNo:""}))})})}).insert({bottom:(new Element("dt")).update(new Element("span",
{"class":"glyphicon glyphicon-map-marker",title:"Address"}))}).insert({bottom:(new Element("dd")).insert({bottom:(new Element("div")).insert({bottom:!0!==c?b.street:(new Element("div",{"class":"street col-sm-12"})).update(new Element("input",{"address-editable-field":"street","class":"form-control input-sm",placeholder:"Street Number and Street name",value:d.street?d.street:""}))})}).insert({bottom:(new Element("div")).insert({bottom:!0!==c?b.city+" ":(new Element("div",{"class":"city col-sm-6"})).update(new Element("input",
{"address-editable-field":"city","class":"form-control input-sm",placeholder:"City / Suburb",value:d.city?d.city:""}))}).insert({bottom:!0!==c?b.region+" ":(new Element("div",{"class":"region col-sm-3"})).update(new Element("input",{"address-editable-field":"region","class":"form-control input-sm",placeholder:"State / Province",value:d.region?d.region:""}))}).insert({bottom:!0!==c?b.postCode:(new Element("div",{"class":"postcode col-sm-3"})).update(new Element("input",{"address-editable-field":"postCode",
"class":"form-control input-sm",placeholder:"PostCode",value:d.postCode?d.postCode:""}))})}).insert({bottom:(new Element("div")).insert({bottom:!0!==c?b.country:(new Element("div",{"class":"postcode col-sm-4"})).update(new Element("input",{"address-editable-field":"country","class":"form-control input-sm",placeholder:"Country",value:d.country?d.country:""}))})})})});!0===c&&a.writeAttribute("address-editable",!0);return a},getCustomerInfoPanel:function(){var a,b;a=this;b=a._customer;return(new Element("div",
{"class":"panel panel-danger CustomerInfoPanel"})).insert({bottom:(new Element("div",{"class":"panel-heading"})).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-8"})).insert({bottom:(new Element("strong")).update((a._creditNote&&a._creditNote.id?"EDITING":"CREATING")+" CREDIT NOTE FOR:  ")}).insert({bottom:(new Element("a",{href:"javascript: void(0);"})).update(b.name).observe("click",function(){a._openCustomerDetailsPage(b)})}).insert({bottom:" <"}).insert({bottom:(new Element("a",
{href:"mailto:"+b.email})).update(b.email)}).insert({bottom:">"}).insert({bottom:a._order?(new Element("strong")).update(" with Order No. "):""}).insert({bottom:a._order?(new Element("a",{target:"_blank",href:"/orderdetails/"+a._order.id+".html"})).update(a._order.orderNo):""}).insert({bottom:a._order?" with creditable value: ":""}).insert({bottom:a._order?(new Element("a",{"class":"badge",href:"javascript: void(0)"})).update(a.getCurrency(a._order.totalAmount-a._order.totalCreditNoteValue)).observe("click",
function(){jQuery.fancybox({width:"95%",height:"95%",autoScale:!1,autoDimensions:!1,fitToView:!1,autoSize:!1,type:"iframe",frameborder:"0",border:"0",seamless:"seamless",href:"/creditnote.html?blanklayout=1&orderid="+a._order.id+".html"})}):""})}).insert({bottom:(new Element("div",{"class":"col-sm-4 text-right"})).setStyle("display: none;").insert({bottom:(new Element("strong")).update("Total Payment Due: ")}).insert({bottom:(new Element("span",{"class":"badge","order-price-summary":"total-payment-due"})).update(a.getCurrency(0))})})})}).insert({bottom:(new Element("div",
{"class":"panel-body"})).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("small")).update((new Element("em")).update(b.description))})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:a._getAddressDiv("Billing Address: ",b.address?b.address.billing:null).addClassName("col-xs-6")}).insert({bottom:a._getAddressDiv("Shipping Address: ",b.address?b.address.shipping:null,!0).addClassName("col-xs-6").addClassName("shipping-address")})})})},_openCustomerDetailsPage:function(a){jQuery.fancybox({width:"95%",
height:"95%",autoScale:!1,autoDimensions:!1,fitToView:!1,autoSize:!1,type:"iframe",href:"/customer/"+a.id+".html?blanklayout=1",beforeClose:function(){window.location=document.URL}});return this},getViewOfCreditNote:function(){return(new Element("div")).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-12"})).update(this.getCustomerInfoPanel())})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-12"})).insert({bottom:(new Element("div",
{"class":"panel panel-danger"})).update(this._getPartsTable()).insert({bottom:this._getSummaryFooter()})})})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-12"})).update(this._saveBtns())})}).insert({bottom:pageJs._creditNote?(new Element("div",{"class":"row"})).setStyle("padding-top: 20px").insert({bottom:new Element("div",{"class":"col-sm-12 comments-div"})}):""})},_selectCustomer:function(a){this._customer=a;0<$$(".CustomerInfoPanel").size()&&
jQuery(".CustomerInfoPanel").replaceWith(this.getCustomerInfoPanel());$(this._htmlIds.itemDiv).update(this.getViewOfCreditNote());0<$$(".init-focus").size()&&$$(".init-focus").first().focus();return this},_getCustomerRow:function(a,b){var c,d,e;c=this;d=b||!1;e=!0===d?"th":"td";return(new Element("tr",{"class":(!0===d?"item_top_row":"btn-hide-row item_row")+(0==a.active?" danger":""),item_id:!0===d?"":a.id})).store("data",a).insert({bottom:(new Element(e,{"class":"name col-xs-1"})).insert({bottom:!0===
d?"&nbsp;":(new Element("span",{"class":"btn btn-primary btn-xs"})).update("select").observe("click",function(){c._selectCustomer(a)})})}).insert({bottom:(new Element(e,{"class":"name col-xs-1"})).update(a.name)}).insert({bottom:(new Element(e,{"class":"email col-xs-1",style:"text-decoration: underline;"})).update(a.email)}).insert({bottom:(new Element(e,{"class":"contact col-xs-1 truncate"})).update(a.contactNo)}).insert({bottom:(new Element(e,{"class":"description col-xs-1"})).update(a.description)}).insert({bottom:(new Element(e,
{"class":"address col-xs-1"})).insert({bottom:!0===d?a.addresses:(new Element("span",{style:"display: inline-block"})).insert({bottom:(new Element("a",{"class":"visible-xs visible-md visible-sm visible-lg",href:"javascript: void(0);"})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-plane address-shipping",style:"font-size: 1.3em",title:"Shipping"})}).observe("click",function(){c.showModalBox("<strong>Shipping Address</strong>",a.address.shipping.full)})})}).insert({bottom:!0===d?
"":(new Element("span",{style:"display: inline-block"})).insert({bottom:(new Element("a",{"class":"visible-xs visible-md visible-sm visible-lg",href:"javascript: void(0);"})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-usd address-billing",style:"font-size: 1.3em; padding-left:10%;",title:"Billing"})}).observe("click",function(){c.showModalBox("<strong>Billing Address</strong>",a.address.shipping.full)})})})}).insert({bottom:(new Element(e,{"class":"mageId col-xs-1"})).update(a.mageId)}).insert({bottom:(new Element(e,
{"class":"cust_active col-xs-1"})).insert({bottom:!0===d?a.active:new Element("input",{type:"checkbox",disabled:!0,checked:a.active})})})},_searchCustomer:function(a){var b,c,d,e,f;b=this;c=$F(a).strip();d=$(a).up("#"+b._htmlIds.searchPanel);b.postAjax(b.getCallbackId("searchCustomer"),{searchTxt:c},{onLoading:function(){$(d).down(".list-div")&&$(d).down(".list-div").remove();$(d).insert({bottom:(new Element("div",{"class":"panel-body"})).update(b.getLoadingImg())})},onSuccess:function(a,c){$(d).down(".panel-body").remove();
try{(e=b.getResp(c,!1,!0))&&e.items&&($(d).insert({bottom:(new Element("small",{"class":"table-responsive list-div"})).insert({bottom:(new Element("table",{"class":"table table-hover table-condensed"})).insert({bottom:(new Element("thead")).insert({bottom:b._getCustomerRow({email:"Email",name:"Name",contactNo:"Contact Num",description:"Description",addresses:"Addresses",address:{billing:{full:"Billing Address"},shipping:{full:"Shipping Address"}},mageId:"Mage Id",active:"Active?"},!0)})}).insert({bottom:f=
new Element("tbody")})})}),e.items.each(function(a){f.insert({bottom:b._getCustomerRow(a)})}))}catch(h){$(d).insert({bottom:(new Element("div",{"class":"panel-body"})).update(b.getAlertBox("ERROR",h).addClassName("alert-danger"))})}}});return b},_getCustomerListPanel:function(){var a,b;a=this;return(new Element("div",{id:a._htmlIds.searchPanel,"class":"panel panel-danger search-panel"})).insert({bottom:(new Element("div",{"class":"panel-heading form-inline"})).insert({bottom:(new Element("strong")).update("Creating a new Credit Note for: ")}).insert({bottom:(new Element("span",
{"class":"input-group col-sm-6"})).insert({bottom:(new Element("input",{"class":"form-control search-txt init-focus",placeholder:"Customer name"})).observe("keydown",function(c){b=this;a.keydown(c,function(){void 0!=b.up("#"+pageJs._htmlIds.searchPanel).down(".item_row")&&1===b.up("#"+pageJs._htmlIds.searchPanel).down("tbody").getElementsBySelector(".item_row").length?b.up("#"+pageJs._htmlIds.searchPanel).down("tbody .item_row .btn").click():$(a._htmlIds.searchPanel).down(".search-btn").click()});
a.keydown(c,function(){void 0!=b.up("#"+pageJs._htmlIds.searchPanel).down(".item_row")&&1===b.up("#"+pageJs._htmlIds.searchPanel).down("tbody").getElementsBySelector(".item_row").length?b.up("#"+pageJs._htmlIds.searchPanel).down("tbody .item_row .btn").click():$(a._htmlIds.searchPanel).down(".search-btn").click()},function(){},Event.KEY_TAB);return!1})}).insert({bottom:(new Element("span",{"class":"input-group-btn search-btn"})).insert({bottom:(new Element("span",{"class":" btn btn-primary"})).insert({bottom:new Element("span",
{"class":"glyphicon glyphicon-search"})})}).observe("click",function(){b=$(a._htmlIds.searchPanel).down(".search-txt");$F(b).blank()?$(a._htmlIds.searchPanel).down(".table tbody")&&($(a._htmlIds.searchPanel).down(".table tbody").innerHTML=null):a._searchCustomer(b)})})}).insert({bottom:(new Element("span",{"class":"btn btn-success pull-right btn-sm btn-danger"})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-remove"})}).observe("click",function(){$(a._htmlIds.searchPanel).down(".search-txt").clear().focus();
$(a._htmlIds.searchPanel).down(".table tbody").innerHTML=null})})})},init:function(){var a,b;a=this;a._creditNote?(a._creditNote.order&&a._creditNote.order.id&&jQuery.isNumeric(a._creditNote.order.id)&&(a._order=a._creditNote.order),a._selectCustomer(a._creditNote.customer),a._creditNote.items.each(function(b){a._selectProduct(b).writeAttribute("creditNoteItemId",b.id)}),jQuery(".new-order-item-input").remove(),jQuery(".btn").remove(),a.disableAll(),(b=$(a._htmlIds.itemDiv).down(".comments-div"))&&
a._creditNote.id&&(a._signRandID(b),b.store("commentsDivJs",b=new CommentsDivJs(a,"CreditNote",a._creditNote.id,10,b.id)),b.render())):a._order?(a._selectCustomer(a._order.customer),a._order.items.each(function(b){a._selectProduct(b).writeAttribute("orderItemId",b.id)})):a._customer?a._selectCustomer(a._customer):$(a._htmlIds.itemDiv).update(a._getCustomerListPanel());0<$$(".init-focus").size()&&$$(".init-focus").first().focus();jQuery(".select2").select2({minimumResultsForSearch:-1});a.paymentListPanelJs&&
a.paymentListPanelJs.setAfterAddFunc(function(){a.disableAll(!0)}).setAfterDeleteFunc(function(){a.disableAll(!0)}).load();return a},_getFormGroup:function(a,b){return(new Element("div",{"class":"form-group"})).insert({bottom:a?(new Element("label",{"class":"control-label"})).update(a):""}).insert({bottom:b.addClassName("form-control")})},_calculateNewProductPrice:function(a){var b,c,d;b=this.getValueFromCurrency($F(a.down("[new-order-item=unitPrice]")));c=$F(a.down("[new-order-item=discount]")).strip().replace("%",
"");d=$F(a.down("[new-order-item=qtyOrdered]")).strip();b=b*(1-c/100)*d;$(a.down("[new-order-item=totalPrice]")).value=this.getCurrency(b);a.retrieve("product")&&(c=a.retrieve("product").unitCost,a.down(".margin")&&$(a.down(".margin")).update(this.getCurrency(1*b-1.1*c*d)+(0===parseInt(c)?'<div><small class="label label-danger">No Cost Yet</small</div>':"")));return this},_bindSubmitNewProductRow:function(a,b){this.keydown(a,function(){$(b).up(".item_row").down(".save-new-product-btn").click()});
return this},_getShippingCostBox:function(a){var b;b=this;return(new Element("input",{"order-price-summary":"totalShippingCost","class":"form-control input-sm","save-order":"totalShippingCost",placeholder:b.getCurrency(0),required:!0,validate_currency:"Invalid number provided!",value:b.getCurrency(a?a:0)})).observe("keyup",function(){b._recalculateSummary()}).wrap(new Element("div",{"class":"form-group"}))},_recalculateSummary:function(){var a,b,c,d,e,f,g;a=this;d=c=b=0;$$(".item_row.order-item-row").each(function(f){e=
f.retrieve("data");c=1*c+1*a.getValueFromCurrency(e.totalPrice);b=1*b+a.getValueFromCurrency(e.unitPrice)*e.qtyOrdered;e.margin&&(d=1*d+1*a.getValueFromCurrency(e.margin))});f=1*c/1.1;jQuery('[order-price-summary="totalPriceExcludeGST"]').val(a.getCurrency(f)).html(a.getCurrency(f));f=1*c-1*f;jQuery('[order-price-summary="totalPriceGST"]').val(a.getCurrency(f)).html(a.getCurrency(f));f=1*b-1*c;jQuery('[order-price-summary="totalDiscount"]').val(a.getCurrency(f)).html(a.getCurrency(f));jQuery('[order-price-summary="totalPriceIncludeGST"]').val(a.getCurrency(c)).html(a.getCurrency(c));
f=1*(0<jQuery('[order-price-summary="totalShippingCost"]').length?a.getValueFromCurrency(jQuery('[order-price-summary="totalShippingCost"]').val()):0)+1*c;jQuery('[order-price-summary="subTotal"]').val(a.getCurrency(f)).html(a.getCurrency(f));g=0<jQuery('[order-price-summary="totalPaidAmount"]').length?jQuery('[order-price-summary="totalPaidAmount"]').val():a._creditNote&&a._creditNote.totalPaid?a._creditNote.totalPaid:0;f=1*f-1*g;0>f&&a.showModalBox('<h4 class="text-danger">Attention!</h4>','<div><strong>We are paying more than the due amount!</strong></div><div><span class="btn btn-primary" onclick="pageJs.hideModalBox();">OK</span>',
!0);jQuery('[order-price-summary="total-payment-due"]').val(a.getCurrency(f)).html(a.getCurrency(f));jQuery('[order-price-summary="total-margin"]').val(a.getCurrency(d)).html(a.getCurrency(d));return a},setPaymentMethods:function(a){this._paymentMethods=a;return this}});