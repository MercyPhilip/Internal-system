var PageJs=new Class.create;
PageJs.prototype=Object.extend(new BPCPageJs,{divWrapper:"",_getPageTitle:function(a){return(new Element("div",{"class":"page-header"})).insert({bottom:(new Element("h3")).update("Wizard of Returns: ").insert({bottom:(new Element("small")).update(a)})})},_showWelcomePanel:function(){var a,c;a=this;c=(new Element("div",{"class":"jumbotron"})).insert({bottom:(new Element("h2")).update("Welcome to Return Wizard:")}).insert({bottom:(new Element("span")).update("With this wizard, you just need to follow the prompts, and the system will try to guide you to do:").insert({bottom:(new Element("ul")).insert({bottom:(new Element("li")).update("reverse an order")}).insert({bottom:(new Element("li")).update("reverse an payment")}).insert({bottom:(new Element("li")).update("return a part")}).insert({bottom:(new Element("li")).update("issue a RA")})})}).insert({bottom:(new Element("div",{"class":"text-right"})).insert({bottom:(new Element("span",
{"class":"btn btn-primary"})).update("Start NOW")}).observe("click",function(){a._showOrderSearchPanel()})});$(a.divWrapper).update(c);return a},_getSearchOrderResultRow:function(a){var c;c=a.id?"td":"th";return(new Element("tr")).store("data",a).insert({bottom:(new Element(c)).update(a.orderNo)}).insert({bottom:(new Element(c)).update(a.status.name)})},_searchOrders:function(a,c){var b,f,d,e,g,h,k;b=this;f=c||1;d=$(a).up(".order-search-panel");e=d.down(".order-list");b._signRandID(a);g=b.getLoadingImg();
d={pagination:{pageNo:f,pageSize:30},searchCriteria:b._collectFormData(d,"search-order")};b.postAjax(b.getCallbackId("searchOrders"),d,{onCreate:function(){jQuery("#"+a.id).button("loading");1===f&&e.update(g)},onSuccess:function(c,d){try{(h=b.getResp(d,!1,!0))&&h.items&&(1===f?e.update(b._getSearchOrderResultRow({}).wrap(new Element("thead"))):$(a).remove(),(k=e.down("tbody"))||e.insert({bottom:k=new Element("tbody")}),h.items.each(function(a){k.insert({bottom:b._getSearchOrderResultRow(a)})}),h.pageStats.pageNumber<
h.pageStats.totalPages&&e.insert({after:(new Element("span",{"class":"btn btn-primary","data-loading-text":"Getting More ..."})).update("Show Me More").observe("click",function(){b._searchOrders(this,1*f+1)})}))}catch(g){1===f?e.update(b.getAlertBox("ERR: ",g).addClassName("alert-danger")):b.showModalBox('<strong class="text-danger">ERR</strong>',g)}},onComplete:function(){jQuery("#"+a.id).button("reset");g.remove()}});return b},_showOrderSearchPanel:function(){var a,c;a=this;c=(new Element("div")).insert({bottom:a._getPageTitle("Search for an order")}).insert({bottom:(new Element("div",
{"class":"panel panel-success order-search-panel"})).insert({bottom:(new Element("div",{"class":"panel-heading"})).insert({bottom:(new Element("strong")).update("We need to find an order/invoice to be able to start the return:")})}).insert({bottom:(new Element("div",{"class":"panel-body"})).insert({bottom:(new Element("div",{"class":"form-inline"})).insert({bottom:(new Element("div",{"class":"form-group"})).insert({bottom:new Element("input",{"class":"form-control",placeholder:"Order No.:","search-order":"ord.orderNo"})})}).insert({bottom:(new Element("div",
{"class":"form-group"})).insert({bottom:new Element("input",{"class":"form-control",placeholder:"Invoice No.:","search-order":"ord.invNo"})})}).insert({bottom:(new Element("div",{"class":"form-group"})).insert({bottom:new Element("input",{"class":"form-control",placeholder:"Customer:","search-order":"customer"})})}).insert({bottom:(new Element("span",{"class":"btn btn-primary","data-loading-text":"searching ..."})).update("Search Orders").observe("click",function(){a._searchOrders(this,1)})})}).insert({bottom:new Element("div",
{"class":"table order-list"})})})});$(a.divWrapper).update(c);return a},init:function(a){this.divWrapper=a;this._showWelcomePanel();return this}});