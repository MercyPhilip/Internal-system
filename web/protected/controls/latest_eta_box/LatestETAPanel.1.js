var LatestETAPanel=new Class.create();LatestETAPanel.prototype={_pageObj:null,initialize:function(a){this._pageObj=a},resultDiv:"",callBackId:"",pagination:{pageNo:1,pageSize:10},setPagination:function(b,a){var c={};c.me=this;c.pageNo=(b&&!isNaN(b))?b:c.me.pagination.pageNo;c.pageSize=(a&&!isNaN(a))?a:c.me.pagination.pageSize;c.me.pagination.pageNo=c.pageNo;c.me.pagination.pageSize=c.pageSize;return c.me},_generateResultRow:function(c,a){var b={};b.me=this;b.isTitle=(a===true?true:false);b.returnDiv=new Element("div",{"class":(b.isTitle===true?"row header":"row"),order_item_id:(b.isTitle===true?"undefined":c.id)});return b.returnDiv.insert({bottom:new Element("span",{"class":"cell sku"}).update(c.sku)}).insert({bottom:new Element("span",{"class":"cell product_name"}).update(c.productName)}).insert({bottom:new Element("span",{"class":"cell eta"}).update(c.eta)}).insert({bottom:new Element("span",{"class":"cell order_no"}).update(c.orderNo).observe("click",function(){jQuery.fancybox({width:"80%",height:"90%",autoScale:true,type:"iframe",href:"/orderdetails/"+c.orderId+".html"})})})},loadLatestETA:function(b){var a={};a.me=this;a.reset=(b||true);a.me._pageObj.postAjax(a.me.callBackId,{pagination:a.me.pagination},{onLoading:function(){},onComplete:function(c,f){try{a.result=a.me._pageObj.getResp(f,false,true);if(!a.result){return}if(a.reset===true){if(a.result.items.length===0){if($(a.me.resultDiv)){$(a.me.resultDiv).update("No ETA found!");return}}a.headerRow={id:"",sku:"SKU",productName:"Name",eta:"ETA",orderNo:"Order No"};a.titleDiv=a.me._generateResultRow(a.headerRow,true);$(a.me.resultDiv).insert({bottom:a.titleDiv})}a.result.items.each(function(e){$(a.me.resultDiv).insert({bottom:a.me._generateResultRow(e)})});if(a.result.totalPages>a.result.pageNumber){$(a.me.resultDiv).insert({bottom:new Element("span",{}).update("Show More").observe("click",function(){a.me.pagination.pageNo=(a.me.pagination.pageNo*1)+1;a.me.loadLatestETA(false)})})}}catch(d){alert(d)}}})}};