var LatestETAPanel=new Class.create();LatestETAPanel.prototype={_pageObj:null,initialize:function(a){this._pageObj=a},resultDiv:"",callBackId:"",pagination:{pageNo:1,pageSize:10},setPagination:function(b,a){var c={};c.me=this;c.pageNo=(b&&!isNaN(b))?b:c.me.pagination.pageNo;c.pageSize=(a&&!isNaN(a))?a:c.me.pagination.pageSize;c.me.pagination.pageNo=c.pageNo;c.me.pagination.pageSize=c.pageSize;return c.me},_generateResultRow:function(c,a){var b={};b.me=this;b.isTitle=(a===true?true:false);if(b.isTitle===true){return""}b.returnDiv=new Element("a",{title:"click to view the details",href:"javascript: void(0);","class":"list-group-item",order_item_id:(b.isTitle===true?"undefined":c.id)}).insert({bottom:new Element("strong",{"class":"list-group-item-heading product_name",title:"SKU: "+c.sku}).update(c.productName)}).insert({bottom:new Element("p",{"class":"list-group-item-text order_no"}).update(c.orderNo)}).insert({bottom:new Element("em",{"class":"list-group-item-text eta"}).update(c.eta)}).observe("click",function(){jQuery.fancybox({width:"95%",height:"95%",autoScale:true,type:"iframe",href:"/orderdetails/"+c.orderId+".html"})});return b.returnDiv},loadLatestETA:function(b){var a={};a.me=this;a.reset=(b||true);a.me._pageObj.postAjax(a.me.callBackId,{pagination:a.me.pagination},{onLoading:function(){},onComplete:function(c,f){try{a.result=a.me._pageObj.getResp(f,false,true);if(!a.result){return}if(a.reset===true){if(a.result.items.length===0){if($(a.me.resultDiv)){$(a.me.resultDiv).update("No ETA found!");return}}a.headerRow={id:"",sku:"SKU",productName:"Name",eta:"ETA",orderNo:"Order No"};a.titleDiv=a.me._generateResultRow(a.headerRow,true);$(a.me.resultDiv).insert({bottom:a.titleDiv})}a.result.items.each(function(e){$(a.me.resultDiv).insert({bottom:a.me._generateResultRow(e)})});if(a.result.totalPages>a.result.pageNumber){$(a.me.resultDiv).insert({bottom:new Element("span",{}).update("Show More").observe("click",function(){a.me.pagination.pageNo=(a.me.pagination.pageNo*1)+1;a.me.loadLatestETA(false)})})}}catch(d){alert(d)}}})}};