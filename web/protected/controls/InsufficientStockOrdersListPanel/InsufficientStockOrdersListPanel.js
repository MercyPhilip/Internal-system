var InsufficientStockOrdersListPanelJs=new Class.create;InsufficientStockOrdersListPanelJs.prototype={_pageJs:null,_panelHTMLID:"",initialize:function(e){this._pageJs=e,this._panelHTMLID="PaymentListPanelJs_"+String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()},getListPanel:function(){var e={};return e.me=this,e.newDiv=new Element("div",{"class":"panel",id:e.me._panelHTMLID}).insert({bottom:new Element("div",{"class":"panel-heading"}).update("Insufficient Stock Against Orders:")}),e.newDiv},_getListItem:function(e){var t={};return t.me=this,t.newDiv=new Element("a",{"class":"list-group-item",href:"javascript: void(0);"}).store("data",e).insert({bottom:new Element("div",{"class":"row"}).insert({bottom:new Element("strong",{"class":"col-sm-4"}).insert({bottom:new Element("a",{href:"/product/"+e.product.id+".html",target:"_BLANK",title:e.product.sku}).setStyle("overflow: hidden; text-align: right; text-overflow: ellipsis; white-space: nowrap;").update(e.product.sku)})}).insert({bottom:new Element("small",{"class":"col-sm-8",title:e.product.name}).setStyle("overflow: hidden; text-align: right; text-overflow: ellipsis; white-space: nowrap;").update(e.product.name)})}).insert({bottom:new Element("div",{"class":"row"}).insert({bottom:new Element("div",{"class":"col-sm-4"}).insert({bottom:new Element("a",{"class":"pull-right",href:"/orderdetails/"+e.order.id+".html",target:"_BLANK"}).update(e.order.orderNo+":")})}).insert({bottom:new Element("div",{"class":"col-sm-1"}).insert({bottom:new Element("small").update(e.order.status.name)})}).insert({bottom:new Element("div",{"class":"col-sm-3"}).insert({bottom:new Element("em").update(moment(e.order.orderDate).format("DD/MMM/YY"))})})}).insert({bottom:new Element("div",{"class":"row"}).insert({bottom:new Element("div",{"class":"col-sm-3"}).update("SOH: <strong>"+e.product.stockOnHand+"</strong>")}).insert({bottom:new Element("div",{"class":"col-sm-3"}).update("SPO: <strong>"+e.product.stockOnPO+"</strong>")}).insert({bottom:new Element("div",{"class":"col-sm-3",title:"Total quantity ordered for this product"}).update("Total Ord: <strong>"+e.totalOrderedQty+"</strong>")}).insert({bottom:new Element("div",{"class":"col-sm-3",title:"Quantity ordered for this order and this product"}).update("This Ord: <strong>"+e.qtyOrdered+"</strong>")})}),t.newDiv},showList:function(){var e={};return e.me=this,$(e.me._panelHTMLID)?(e.loadingDiv=new Element("div",{"class":"panel-body"}).update(e.me._pageJs.getLoadingImg()),e.ajax=new Ajax.Request("/ajax/getInsufficientStockOrders",{method:"get",parameters:{pageNo:1,pageSize:15},onLoading:function(){$(e.me._panelHTMLID).insert({bottom:e.loadingDiv})},onSuccess:function(t){try{if(e.result=e.me._pageJs.getResp(t.responseText,!1,!0),!e.result||!e.result.items)return;$(e.me._panelHTMLID).down("panel-body")&&$(e.me._panelHTMLID).down("panel-body").remove(),e.list=$(e.me._panelHTMLID).down("list-group"),e.list||$(e.me._panelHTMLID).insert({bottom:e.list=new Element("div",{"class":"list-group"})}),e.result.items.each(function(t){e.list.insert({bottom:e.me._getListItem(t)})})}catch(n){$(e.me._panelHTMLID).insert({bottom:new Element("div",{"class":"panel-body"}).update(e.me.getAlertBox("ERROR: ",n).addClassName("alert-danger"))})}},onComplete:function(){e.loadingDiv.remove()}}),e.me):e.me},load:function(){var e={};return e.me=this,$(e.me._panelHTMLID)&&e.me.showList(),e.me}};