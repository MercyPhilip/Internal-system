var InsufficientStockOrdersListPanelJs=new Class.create;
InsufficientStockOrdersListPanelJs.prototype={_pageJs:null,_panelHTMLID:"",initialize:function(a){this._pageJs=a;this._panelHTMLID="PaymentListPanelJs_"+String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()},getListPanel:function(){return(new Element("div",{"class":"panel",id:this._panelHTMLID})).insert({bottom:(new Element("div",{"class":"panel-heading"})).update("Insufficient Stock Against Orders:")})},_getListItem:function(a){return(new Element("a",{"class":"list-group-item",href:"javascript: void(0);"})).store("data",
a).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-4"})).insert({bottom:(new Element("a",{href:"/orderdetails/"+a.order.id+".html",target:"_BLANK"})).update(a.order.orderNo+":")})}).insert({bottom:(new Element("div",{"class":"col-sm-4"})).insert({bottom:(new Element("small")).update(a.order.status.name)})}).insert({bottom:(new Element("div",{"class":"col-sm-4 text-right"})).insert({bottom:(new Element("em")).update(moment(a.order.orderDate).format("DD/MMM/YY"))})})}).insert({bottom:(new Element("div",
{"class":"row"})).insert({bottom:(new Element("strong",{"class":"col-sm-12"})).insert({bottom:(new Element("a",{href:"/product/"+a.product.id+".html",target:"_BLANK",title:a.product.sku})).setStyle("overflow: hidden; text-align: right; text-overflow: ellipsis; white-space: nowrap;").update(a.product.sku)})})}).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-3"})).update("SOH: <strong>"+a.product.stockOnHand+"</strong>")}).insert({bottom:(new Element("div",
{"class":"col-sm-3"})).update("SPO: <strong>"+a.product.stockOnPO+"</strong>")}).insert({bottom:(new Element("div",{"class":"col-sm-3",title:"Total quantity ordered for this product"})).update("Total Ord: <strong>"+a.totalOrderedQty+"</strong>")}).insert({bottom:(new Element("div",{"class":"col-sm-3",title:"Quantity ordered for this order and this product"})).update("This Ord: <strong>"+a.qtyOrdered+"</strong>")})})},showList:function(){var a,b,c,d;a=this;if(!$(a._panelHTMLID))return a;b=(new Element("div",
{"class":"panel-body"})).update(a._pageJs.getLoadingImg());new Ajax.Request("/ajax/getInsufficientStockOrders",{method:"get",parameters:{pageNo:1,pageSize:10,storeId:jQuery("#storeId").attr("value"),userId:jQuery("#userId").attr("value")},onCreate:function(){$(a._panelHTMLID).insert({bottom:b})},onSuccess:function(b){try{(c=a._pageJs.getResp(b.responseText,!1,!0))&&c.items&&($(a._panelHTMLID).down("panel-body")&&$(a._panelHTMLID).down("panel-body").remove(),(d=$(a._panelHTMLID).down("list-group"))||
$(a._panelHTMLID).insert({bottom:d=new Element("div",{"class":"list-group"})}),c.items.each(function(b){d.insert({bottom:a._getListItem(b)})}))}catch(e){$(a._panelHTMLID).insert({bottom:(new Element("div",{"class":"panel-body"})).update(a.getAlertBox("ERROR: ",e).addClassName("alert-danger"))})}},onComplete:function(){b.remove()}});return a},load:function(){$(this._panelHTMLID)&&this.showList();return this}};