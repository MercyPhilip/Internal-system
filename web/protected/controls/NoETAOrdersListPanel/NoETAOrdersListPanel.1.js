var NoETAOrdersListPanelJs=new Class.create;
NoETAOrdersListPanelJs.prototype={_pageJs:null,_panelHTMLID:"",initialize:function(a){this._pageJs=a;this._panelHTMLID="NoETAOrdersListPanelJs_"+String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()},getListPanel:function(){return(new Element("div",{"class":"panel",id:this._panelHTMLID})).insert({bottom:(new Element("div",{"class":"panel-heading"})).update("NO ETA and Insufficient Stock Orders:")})},_getListItem:function(a){return(new Element("a",{"class":"list-group-item",href:"javascript: void(0);"})).store("data",
a).insert({bottom:(new Element("div",{"class":"row"})).insert({bottom:(new Element("div",{"class":"col-sm-3"})).insert({bottom:(new Element("a",{href:"/orderdetails/"+a.id+".html",target:"_BLANK"})).update(a.orderNo)})}).insert({bottom:(new Element("div",{"class":"col-sm-3 text-right"})).insert({bottom:(new Element("em")).update(moment(a.orderDate).format("DD/MMM/YY"))})}).insert({bottom:(new Element("div",{"class":"col-sm-3 "})).insert({bottom:(new Element("small")).update(a.status.name)})}).insert({bottom:(new Element("div",
{"class":"col-sm-3"})).insert({bottom:(new Element("small")).update(a.customer.name)})})})},showList:function(){var a,b,c,d;a=this;if(!$(a._panelHTMLID))return a;b=(new Element("div",{"class":"panel-body"})).update(a._pageJs.getLoadingImg());new Ajax.Request("/ajax/getNoETAStockOrders",{method:"get",parameters:{pageNo:1,pageSize:3,storeId:jQuery("#storeId").attr("value"),userId:jQuery("#userId").attr("value")},onCreate:function(){$(a._panelHTMLID).insert({bottom:b})},onSuccess:function(b){try{(c=
a._pageJs.getResp(b.responseText,!1,!0))&&c.items&&($(a._panelHTMLID).down("panel-body")&&$(a._panelHTMLID).down("panel-body").remove(),(d=$(a._panelHTMLID).down("list-group"))||$(a._panelHTMLID).insert({bottom:d=new Element("div",{"class":"list-group"})}),c.items.each(function(b){d.insert({bottom:a._getListItem(b)})}))}catch(e){$(a._panelHTMLID).insert({bottom:(new Element("div",{"class":"panel-body"})).update(a.getAlertBox("ERROR: ",e).addClassName("alert-danger"))})}},onComplete:function(){b.remove()}});
return a},load:function(){$(this._panelHTMLID)&&this.showList();return this}};