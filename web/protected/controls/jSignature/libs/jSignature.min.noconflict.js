!function(a){!function(){function b(b){for(var c,e,d=b.css("color"),b=b[0],f=!1;b&&!e&&!f;){try{c=a(b).css("background-color")}catch(a){c="transparent"}"transparent"!==c&&"rgba(0, 0, 0, 0)"!==c&&(e=c),f=b.body,b=b.parentNode}var g,b=/rgb[a]*\((\d+),\s*(\d+),\s*(\d+)/,f=/#([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})([AaBbCcDdEeFf\d]{2})/;c=void 0,(c=d.match(b))?g={r:parseInt(c[1],10),g:parseInt(c[2],10),b:parseInt(c[3],10)}:(c=d.match(f))&&(g={r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)});var h;return e?(c=void 0,(c=e.match(b))?h={r:parseInt(c[1],10),g:parseInt(c[2],10),b:parseInt(c[3],10)}:(c=e.match(f))&&(h={r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)})):h=g&&127<Math.max.apply(null,[g.r,g.g,g.b])?{r:0,g:0,b:0}:{r:255,g:255,b:255},c=function(a){return"rgb("+[a.r,a.g,a.b].join(", ")+")"},g&&h?(b=Math.max.apply(null,[g.r,g.g,g.b]),g=Math.max.apply(null,[h.r,h.g,h.b]),g=Math.round(g+-.75*(g-b)),g={r:g,g:g,b:g}):g?(g=Math.max.apply(null,[g.r,g.g,g.b]),b=1,127<g&&(b=-1),g=Math.round(g+96*b),g={r:g,g:g,b:g}):g={r:191,g:191,b:191},{color:d,"background-color":h?c(h):e,"decor-color":c(g)}}function c(a,b){this.x=a,this.y=b,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var c=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*c(this.y);else if(0===this.y)this._length=a,this.x=a*c(this.x);else{var b=Math.abs(this.y/this.x),d=Math.sqrt(Math.pow(a,2)/(1+Math.pow(b,2))),b=b*d;this._length=a,this.x=d*c(this.x),this.y=b*c(this.y)}return this},this.angleTo=function(a){var b=this.getLength()*a.getLength();return 0===b?0:Math.acos(Math.min(Math.max((this.x*a.x+this.y*a.y)/b,-1),1))/Math.PI}}function d(a,b){this.x=a,this.y=b,this.getVectorToCoordinates=function(a,b){return new c(a-this.x,b-this.y)},this.getVectorFromCoordinates=function(a,b){return this.getVectorToCoordinates(a,b).reverse()},this.getVectorToPoint=function(a){return new c(a.x-this.x,a.y-this.y)},this.getVectorFromPoint=function(a){return this.getVectorToPoint(a).reverse()}}function e(a,b,c,d,e){if(this.data=a,this.context=b,a.length)for(var g,h,f=a.length,i=0;i<f;i++){g=a[i],h=g.x.length,c.call(b,g);for(var j=1;j<h;j++)d.call(b,g,j);e.call(b,g)}this.changed=function(){},this.startStrokeFn=c,this.addToStrokeFn=d,this.endStrokeFn=e,this.inStroke=!1,this._stroke=this._lastPoint=null,this.startStroke=function(a){if(a&&"number"==typeof a.x&&"number"==typeof a.y){this._stroke={x:[a.x],y:[a.y]},this.data.push(this._stroke),this._lastPoint=a,this.inStroke=!0;var b=this._stroke,c=this.startStrokeFn,d=this.context;return setTimeout(function(){c.call(d,b)},3),a}return null},this.addToStroke=function(a){if(this.inStroke&&"number"==typeof a.x&&"number"==typeof a.y&&4<Math.abs(a.x-this._lastPoint.x)+Math.abs(a.y-this._lastPoint.y)){var b=this._stroke.x.length;this._stroke.x.push(a.x),this._stroke.y.push(a.y),this._lastPoint=a;var c=this._stroke,d=this.addToStrokeFn,e=this.context;return setTimeout(function(){d.call(e,c,b)},3),a}return null},this.endStroke=function(){var a=this.inStroke;if(this.inStroke=!1,this._lastPoint=null,a){var b=this._stroke,c=this.endStrokeFn,d=this.context,e=this.changed;return setTimeout(function(){c.call(d,b),e.call(d)},3),!0}return null}}function f(c,e,f){var j=this.$parent=a(c),c=this.eventTokens={};this.events=new i(this);var k=a.fn[g]("globalEvents"),l={width:"ratio",height:"ratio",sizeRatio:4,color:"#000","background-color":"#fff","decor-color":"#eee",lineWidth:0,minFatFingerCompensation:-10,showUndoButton:!1,data:[]};a.extend(l,b(j)),e&&a.extend(l,e),this.settings=l;for(var m in f)f.hasOwnProperty(m)&&f[m].call(this,m);this.events.publish(g+".initializing"),this.$controlbarUpper=a('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1em !important;margin-bottom:1em !important;"></div>').appendTo(j),this.isCanvasEmulator=!1,f=this.canvas=this.initializeCanvas(l),e=a(f),this.$controlbarLower=a('<div style="padding:0 !important;margin:0 !important;width: 100% !important; height: 0 !important;margin-top:-1.5em !important;margin-bottom:1.5em !important;"></div>').appendTo(j),this.canvasContext=f.getContext("2d"),e.data(g+".this",this),j=(j=l.lineWidth)?j:Math.max(Math.round(f.width/400),2),l.lineWidth=j,this.lineCurveThreshold=3*l.lineWidth,l.cssclass&&""!=a.trim(l.cssclass)&&e.addClass(l.cssclass),this.fatFingerCompensation=0;var j=function(b){var c,e,f=function(a){return a=a.changedTouches&&0<a.changedTouches.length?a.changedTouches[0]:a,new d(Math.round(a.pageX+c),Math.round(a.pageY+e)+b.fatFingerCompensation)},g=new h(750,function(){b.dataEngine.endStroke()});return this.drawEndHandler=function(a){try{a.preventDefault()}catch(a){}g.clear(),b.dataEngine.endStroke()},this.drawStartHandler=function(d){d.preventDefault();var h=a(b.canvas).offset();c=-1*h.left,e=-1*h.top,b.dataEngine.startStroke(f(d)),g.kick()},this.drawMoveHandler=function(a){a.preventDefault(),b.dataEngine.inStroke&&(b.dataEngine.addToStroke(f(a)),g.kick())},this}.call({},this),n=j.drawEndHandler,o=j.drawStartHandler,p=j.drawMoveHandler,q=this.canvas,e=a(q);this.isCanvasEmulator?(e.bind("mousemove."+g,p),e.bind("mouseup."+g,n),e.bind("mousedown."+g,o)):(q.ontouchstart=function(a){q.onmousedown=void 0,q.onmouseup=void 0,q.onmousemove=void 0,this.fatFingerCompensation=l.minFatFingerCompensation&&-3*l.lineWidth>l.minFatFingerCompensation?-3*l.lineWidth:l.minFatFingerCompensation,o(a),q.ontouchend=n,q.ontouchstart=o,q.ontouchmove=p},q.onmousedown=function(a){q.ontouchstart=void 0,q.ontouchend=void 0,q.ontouchmove=void 0,o(a),q.onmousedown=o,q.onmouseup=n,q.onmousemove=p}),c[g+".windowmouseup"]=k.subscribe(g+".windowmouseup",j.drawEndHandler),this.events.publish(g+".attachingEventHandlers");var r=this,c=l.width.toString(10),s=g;return"ratio"!==c&&"%"!==c.split("")[c.length-1]||(this.eventTokens[s+".parentresized"]=k.subscribe(s+".parentresized",function(a,b,c){return function(){var d=b.width();if(d!==c){for(var e in a)a.hasOwnProperty(e)&&(k.unsubscribe(a[e]),delete a[e]);var f=r.settings;r.$parent.children().remove();for(e in r)r.hasOwnProperty(e)&&delete r[e];e=f.data;var h,i,j,l,m,n,d=1*d/c,g=[];for(i=0,j=e.length;i<j;i++){for(n=e[i],h={x:[],y:[]},l=0,m=n.x.length;l<m;l++)h.x.push(n.x[l]*d),h.y.push(n.y[l]*d);g.push(h)}f.data=g,b[s](f)}}}(this.eventTokens,this.$parent,this.$parent.width(),(this.canvas.width,this.canvas.height)))),this.resetCanvas(l.data),this.events.publish(g+".initialized"),this}var g="jSignature",h=function(a,b){var c;return this.kick=function(){clearTimeout(c),c=setTimeout(b,a)},this.clear=function(){clearTimeout(c)},this},i=function(a){this.topics={},this.context=a||this,this.publish=function(a,b,c,d){if(this.topics[a]){var h,i,j,k,e=this.topics[a],f=Array.prototype.slice.call(arguments,1),g=[];for(i=0,j=e.length;i<j;i++)k=e[i],h=k[0],k[1]&&(k[0]=function(){},g.push(i)),h.apply(this.context,f);for(i=0,j=g.length;i<j;i++)e.splice(g[i],1)}},this.subscribe=function(a,b,c){return this.topics[a]?this.topics[a].push([b,c]):this.topics[a]=[[b,c]],{topic:a,callback:b}},this.unsubscribe=function(a){if(this.topics[a.topic])for(var b=this.topics[a.topic],c=0,d=b.length;c<d;c++)b[c][0]===a.callback&&b.splice(c,1)}},j=function(a){var b=this.canvasContext,c=a.x[0],a=a.y[0],d=this.settings.lineWidth,e=b.fillStyle;b.fillStyle=b.strokeStyle,b.fillRect(c+d/-2,a+d/-2,d,d),b.fillStyle=e},k=function(a,b){var e=new d(a.x[b-1],a.y[b-1]),f=new d(a.x[b],a.y[b]),g=e.getVectorToPoint(f);if(1<b){var j,h=new d(a.x[b-2],a.y[b-2]),i=h.getVectorToPoint(e);if(i.getLength()>this.lineCurveThreshold){j=2<b?new d(a.x[b-3],a.y[b-3]).getVectorToPoint(h):new c(0,0);var k=.35*i.getLength(),l=i.angleTo(j.reverse()),m=g.angleTo(i.reverse());j=new c(j.x+i.x,j.y+i.y).resizeTo(Math.max(.05,l)*k);var n=new c(i.x+g.x,i.y+g.y).reverse().resizeTo(Math.max(.05,m)*k),i=this.canvasContext,k=h.x,m=h.y,l=e.x,o=e.y,p=h.x+j.x,h=h.y+j.y;j=e.x+n.x,n=e.y+n.y,i.beginPath(),i.moveTo(k,m),i.bezierCurveTo(p,h,j,n,l,o),i.stroke()}}g.getLength()<=this.lineCurveThreshold&&(g=this.canvasContext,h=e.x,e=e.y,j=f.x,f=f.y,g.beginPath(),g.moveTo(h,e),g.lineTo(j,f),g.stroke())},l=function(a){var b=a.x.length-1;if(0<b){var e=new d(a.x[b],a.y[b]),f=new d(a.x[b-1],a.y[b-1]),g=f.getVectorToPoint(e);if(g.getLength()>this.lineCurveThreshold){if(1<b){var a=new d(a.x[b-2],a.y[b-2]).getVectorToPoint(f),h=new c(a.x+g.x,a.y+g.y).resizeTo(g.getLength()/2),g=this.canvasContext,a=f.x,b=f.y,i=e.x,j=e.y,k=f.x+h.x,f=f.y+h.y,h=e.x,e=e.y;g.beginPath(),g.moveTo(a,b),g.bezierCurveTo(k,f,h,e,i,j)}else g=this.canvasContext,a=f.x,f=f.y,b=e.x,e=e.y,g.beginPath(),g.moveTo(a,f),g.lineTo(b,e);g.stroke()}}};f.prototype.resetCanvas=function(b){var c=this.canvas,d=this.settings,f=this.canvasContext,h=this.isCanvasEmulator,i=c.width,m=c.height;f.clearRect(0,0,i+30,m+30),f.shadowColor=f.fillStyle=d["background-color"],h&&f.fillRect(0,0,i+30,m+30),f.lineWidth=Math.ceil(parseInt(d.lineWidth,10)),f.lineCap=f.lineJoin="round",f.strokeStyle=d["decor-color"],f.shadowOffsetX=0,f.shadowOffsetY=0;var n=Math.round(m/5),o=1.5*n,p=m-n,i=i-1.5*n,m=m-n;f.beginPath(),f.moveTo(o,p),f.lineTo(i,m),f.stroke(),f.strokeStyle=d.color,h||(f.shadowColor=f.strokeStyle,f.shadowOffsetX=.5*f.lineWidth,f.shadowOffsetY=-.6*f.lineWidth,f.shadowBlur=0),b||(b=[]),f=this.dataEngine=new e(b,this,j,k,l),d.data=b,a(c).data(g+".data",b).data(g+".settings",d);var q=this.$parent,r=this.events,s=g;return f.changed=function(){r.publish(s+".change"),q.trigger("change")},f.changed(),!0},f.prototype.initializeCanvas=function(b){var c=document.createElement("canvas"),d=a(c);if(b.width===b.height&&"ratio"===b.height&&(b.width="100%"),d.css("margin",0).css("padding",0).css("border","none").css("height","ratio"!==b.height&&b.height?b.height.toString(10):1).css("width","ratio"!==b.width&&b.width?b.width.toString(10):1),d.appendTo(this.$parent),"ratio"===b.height?d.css("height",Math.round(d.width()/b.sizeRatio)+100):"ratio"===b.width&&d.css("width",Math.round(d.height()*b.sizeRatio)),d.addClass(g),c.width=d.width(),c.height=d.height(),b=c,b.getContext)b=!1;else{var d=b.ownerDocument.parentWindow,e=d.FlashCanvas?b.ownerDocument.parentWindow.FlashCanvas:"undefined"==typeof FlashCanvas?void 0:FlashCanvas;if(!e)throw Error("Canvas element does not support 2d context. jSignature cannot proceed.");if(b=e.initElement(b),e=1,d&&d.screen&&d.screen.deviceXDPI&&d.screen.logicalXDPI&&(e=1*d.screen.deviceXDPI/d.screen.logicalXDPI),1!==e)try{a(b).children("object").get(0).resize(Math.ceil(b.width*e),Math.ceil(b.height*e)),b.getContext("2d").scale(e,e)}catch(a){}b=!0}return this.isCanvasEmulator=b,c.onselectstart=function(a){return a&&a.preventDefault&&a.preventDefault(),a&&a.stopPropagation&&a.stopPropagation(),!1},c};var s,m=window,n=function(a,b){var c=new Image,d=this;c.onload=function(){d.getContext("2d").drawImage(c,0,0,c.width<d.width?c.width:d.width,c.height<d.height?c.height:d.height)},c.src="data:"+b+","+a},o=function(a){return this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".this").resetCanvas(a),this},p=function(a,b){if(void 0!==b||"string"!=typeof a||"data:"!==a.substr(0,5)||(b=a.slice(5).split(",")[0],a=a.slice(6+b.length),b!==a)){var c=this.find("canvas."+g).add(this.filter("canvas."+g));if(!w.hasOwnProperty(b))throw Error(g+" is unable to find import plugin with for format '"+String(b)+"'");return 0!==c.length&&w[b].call(c[0],a,b,function(a){return function(){return a.resetCanvas.apply(a,arguments)}}(c.data(g+".this"))),this}},q=new i,r=g,t=function(){q.publish(r+".parentresized")};a(m).bind("resize."+r,function(){s&&clearTimeout(s),s=setTimeout(t,500)}).bind("mouseup."+r,function(){q.publish(r+".windowmouseup")});var u={},v={default:function(){return this.toDataURL()},native:function(a){return a},image:function(){var a=this.toDataURL();if("string"==typeof a&&4<a.length&&"data:"===a.slice(0,5)&&-1!==a.indexOf(",")){var b=a.indexOf(",");return[a.slice(5,b),a.substr(b+1)]}return[]}},w={native:function(a,b,c){c(a)},image:n,"image/png;base64":n,"image/jpeg;base64":n,"image/jpg;base64":n},x={export:v,import:w,instance:u},y={init:function(a){return this.each(function(){var b,c=!1;for(b=this.parentNode;b&&!c;)c=b.body,b=b.parentNode;!c||new f(this,a,u)})},getSettings:function(){return this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".this").settings},clear:o,reset:o,addPlugin:function(a,b,c){return x.hasOwnProperty(a)&&(x[a][b]=c),this},listPlugins:function(a){var b=[];if(x.hasOwnProperty(a)){var c,a=x[a];for(c in a)a.hasOwnProperty(c)&&b.push(c)}return b},getData:function(a){var b=this.find("canvas."+g).add(this.filter("canvas."+g));if(void 0===a&&(a="default"),0!==b.length&&v.hasOwnProperty(a))return v[a].call(b.get(0),b.data(g+".data"))},importData:p,setData:p,globalEvents:function(){return q},events:function(){return this.find("canvas."+g).add(this.filter("canvas."+g)).data(g+".this").events}};a.fn[g]=function(b){return b&&"object"!=typeof b?"string"==typeof b&&y[b]?y[b].apply(this,Array.prototype.slice.call(arguments,1)):void a.error("Method "+String(b)+" does not exist on jQuery."+g):y.init.apply(this,arguments)}}(),function(){a.fn.jSignature("addPlugin","instance","UndoButton",function(b){this.events.subscribe("jSignature.attachingEventHandlers",function(){if(this.settings[b]){var c=this.settings[b];"function"!=typeof c&&(c=function(){var b=a('<input type="button" value="Undo last stroke" style="position:absolute;display:none;margin:0 !important;top:auto" />').appendTo(this.$controlbarLower),c=b.width();return b.css("left",Math.round((this.canvas.width-c)/2)),c!==b.width()&&b.width(c),b});var d=c.call(this),e=this;e.events.subscribe("jSignature.change",function(){e.dataEngine.data.length?d.show():d.hide()});var f=this,g=(this.events.topics.hasOwnProperty("jSignature.undo")?b:"jSignature")+".undo";d.bind("click",function(){f.events.publish(g)}),f.events.subscribe(g,function(){var a=f.dataEngine.data;a.length&&(a.pop(),f.resetCanvas(a))})}})})}(),function(){for(var a={},b={},c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWX".split(""),d=c.length/2,e=d-1;-1<e;e--)a[c[e]]=c[e+d],b[c[e+d]]=c[e];var f=function(b){for(var b=b.split(""),c=b.length,d=1;d<c;d++)b[d]=a[b[d]];return b.join("")},g=function(a){for(var h,i,b=[],c=0,e=1,g=a.length,j=0;j<g;j++)h=Math.round(a[j]),i=h-c,c=h,0>i&&0<e?(e=-1,b.push("Z")):0<i&&0>e&&(e=1,b.push("Y")),h=Math.abs(i),h>=d?b.push(f(h.toString(d))):b.push(h.toString(d));return b.join("")},h=function(c){for(var g,e=[],c=c.split(""),f=c.length,h=1,i=[],j=0,k=0;k<f;k++)g=c[k],g in a||"Z"===g||"Y"===g?(0!==i.length&&(i=parseInt(i.join(""),d)*h+j,e.push(i),j=i),"Z"===g?(h=-1,i=[]):"Y"===g?(h=1,i=[]):i=[g]):i.push(b[g]);return e.push(parseInt(i.join(""),d)*h+j),e},i=function(a){for(var d,b=[],c=a.length,e=0;e<c;e++)d=a[e],b.push(g(d.x)),b.push(g(d.y));return b.join("_")},j=function(a){for(var b=[],a=a.split("_"),c=a.length/2,d=0;d<c;d++)b.push({x:h(a[2*d]),y:h(a[2*d+1])});return b},c=function(a){return["image/jsignature;base30",i(a)]},e=function(a,b,c){"string"==typeof a&&("image/jsignature;base30"===a.substring(0,23).toLowerCase()&&(a=a.substring(24)),c(j(a)))};if(null==this.jQuery)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");var k=this.jQuery.fn.jSignature;k("addPlugin","export","base30",c),k("addPlugin","export","image/jsignature;base30",c),k("addPlugin","import","base30",e),k("addPlugin","import","image/jsignature;base30",e),this.jSignatureDebug&&(this.jSignatureDebug.base30={remapTailChars:f,compressstrokeleg:g,uncompressstrokeleg:h,compressstrokes:i,uncompressstrokes:j,charmap:a})}.call("undefined"!=typeof window?window:this),function(){function b(a,b){this.x=a,this.y=b,this.reverse=function(){return new this.constructor(-1*this.x,-1*this.y)},this._length=null,this.getLength=function(){return this._length||(this._length=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))),this._length};var c=function(a){return Math.round(a/Math.abs(a))};this.resizeTo=function(a){if(0===this.x&&0===this.y)this._length=0;else if(0===this.x)this._length=a,this.y=a*c(this.y);else if(0===this.y)this._length=a,this.x=a*c(this.x);else{var b=Math.abs(this.y/this.x),d=Math.sqrt(Math.pow(a,2)/(1+Math.pow(b,2))),b=b*d;this._length=a,this.x=d*c(this.x),this.y=b*c(this.y)}return this},this.angleTo=function(a){var b=this.getLength()*a.getLength();return 0===b?0:Math.acos(Math.min(Math.max((this.x*a.x+this.y*a.y)/b,-1),1))/Math.PI}}function c(a,c){this.x=a,this.y=c,this.getVectorToCoordinates=function(a,c){return new b(a-this.x,c-this.y)},this.getVectorFromCoordinates=function(a,b){return this.getVectorToCoordinates(a,b).reverse()},this.getVectorToPoint=function(a){return new b(a.x-this.x,a.y-this.y)},this.getVectorFromPoint=function(a){return this.getVectorToPoint(a).reverse()}}function d(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}function e(a,e,f){var e=e+1,g=new c(a.x[e-1],a.y[e-1]),h=new c(a.x[e],a.y[e]),h=g.getVectorToPoint(h),i=new c(a.x[e-2],a.y[e-2]),g=i.getVectorToPoint(g);return g.getLength()>f?(f=2<e?new c(a.x[e-3],a.y[e-3]).getVectorToPoint(i):new b(0,0),a=.35*g.getLength(),i=g.angleTo(f.reverse()),e=h.angleTo(g.reverse()),f=new b(f.x+g.x,f.y+g.y).resizeTo(Math.max(.05,i)*a),h=new b(g.x+h.x,g.y+h.y).reverse().resizeTo(Math.max(.05,e)*a),h=new b(g.x+h.x,g.y+h.y),["c",d(f.x,2),d(f.y,2),d(h.x,2),d(h.y,2),d(g.x,2),d(g.y,2)]):["l",d(g.x,2),d(g.y,2)]}function f(a,e){var f=a.x.length-1,g=new c(a.x[f],a.y[f]),h=new c(a.x[f-1],a.y[f-1]),g=h.getVectorToPoint(g);if(1<f&&g.getLength()>e){var f=new c(a.x[f-2],a.y[f-2]).getVectorToPoint(h),h=g.angleTo(f.reverse()),i=.35*g.getLength(),f=new b(f.x+g.x,f.y+g.y).resizeTo(Math.max(.05,h)*i);return["c",d(f.x,2),d(f.y,2),d(g.x,2),d(g.y,2),d(g.x,2),d(g.y,2)]}return["l",d(g.x,2),d(g.y,2)]}function g(a,b,c){for(var b=["M",d(a.x[0]-b,2),d(a.y[0]-c,2)],c=1,g=a.x.length-1;c<g;c++)b.push.apply(b,e(a,c,1));return 0<g?b.push.apply(b,f(a,c,1)):0===g&&b.push.apply(b,["l",1,1]),b.join(" ")}function h(a){var c,e,b=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'],d=a.length,f=[],h=[],i=e=c=0,j=0,k=[];if(0!==d){for(c=0;c<d;c++){i=a[c],j=[],e={x:[],y:[]};for(var l=void 0,m=void 0,l=0,m=i.x.length;l<m;l++)j.push({x:i.x[l],y:i.y[l]});for(j=simplify(j,.7,!0),l=0,m=j.length;l<m;l++)e.x.push(j[l].x),e.y.push(j[l].y);k.push(e),f=f.concat(e.x),h=h.concat(e.y)}a=Math.min.apply(null,f)-1,d=Math.max.apply(null,f)+1,f=Math.min.apply(null,h)-1,h=Math.max.apply(null,h)+1,i=0>a?0:a,j=0>f?0:f,c=d-a,e=h-f}for(b.push('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+c.toString()+'" height="'+e.toString()+'">'),c=0,d=k.length;c<d;c++)e=k[c],b.push('<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="'+g(e,i,j)+'"/>');return b.push("</svg>"),b.join("")}function i(a){return[m,h(a)]}function j(a){return[n,l(h(a))]}var k=window;if(("undefined"!=typeof exports?exports:k).simplify=function(a,b,c){if(b=void 0!==b?b*b:1,!c){for(var e,d=a.length,f=a[0],g=[f],c=1;c<d;c++){e=a[c];var h=e.x-f.x,i=e.y-f.y;h*h+i*i>b&&(g.push(e),f=e)}f!==e&&g.push(e),a=g}e=a;var j,k,c=e.length,d=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(c),f=0,g=c-1,l=[],m=[],n=[];for(d[f]=d[g]=1;g;){for(i=0,h=f+1;h<g;h++){j=e[h];var o=e[f],p=e[g],q=o.x,r=o.y,o=p.x-q,s=p.y-r,t=void 0;0===o&&0===s||(t=((j.x-q)*o+(j.y-r)*s)/(o*o+s*s),1<t?(q=p.x,r=p.y):0<t&&(q+=o*t,r+=s*t)),o=j.x-q,s=j.y-r,j=o*o+s*s,j>i&&(k=h,i=j)}i>b&&(d[k]=1,l.push(f),m.push(k),l.push(k),m.push(g)),f=l.pop(),g=m.pop()}for(h=0;h<c;h++)d[h]&&n.push(e[h]);return a=n},"function"!=typeof l)var l=function(a){var c,d,e,f,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),g=0,h=0,i="",i=[];do{c=a.charCodeAt(g++),d=a.charCodeAt(g++),e=a.charCodeAt(g++),f=c<<16|d<<8|e,c=f>>18&63,d=f>>12&63,e=f>>6&63,f&=63,i[h++]=b[c]+b[d]+b[e]+b[f]}while(g<a.length);return i=i.join(""),a=a.length%3,(a?i.slice(0,a-3):i)+"===".slice(a||3)};var m="image/svg+xml",n="image/svg+xml;base64";if(void 0===a)throw Error("We need jQuery for some of the functionality. jQuery is not detected. Failing to initialize...");k=a.fn.jSignature,k("addPlugin","export","svg",i),k("addPlugin","export",m,i),k("addPlugin","export","svgbase64",j),k("addPlugin","export",n,j)}()}(jQuery);