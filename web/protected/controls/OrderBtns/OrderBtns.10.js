var OrderBtnsJs=new Class.create;OrderBtnsJs.PRINT_TYPE={HTML:0,PDF:1,POS:2},OrderBtnsJs.prototype={SEND_EMAIL_CALLBACK_ID:"",_pageJs:null,initialize:function(a,b){this._pageJs=a,this._order=b},openOrderPrintPage:function(a,b){var c={};return c.me=this,c.pdf=a||0,c.viewOnly=b||!1,c.pdf==OrderBtnsJs.PRINT_TYPE.POS?c.newWindow=window.open("/printpos/order/"+c.me._order.id+".html?pdf="+parseInt(c.pdf),c.me._order.status.name+" Order "+c.me._order.orderNo,"width=303, location=no, scrollbars=yes, menubar=no, status=no, titlebar=no, fullscreen=no, toolbar=no"):c.newWindow=window.open("/print/order/"+c.me._order.id+".html?pdf="+parseInt(c.pdf),c.me._order.status.name+" Order "+c.me._order.orderNo,"width=1300, location=no, scrollbars=yes, menubar=no, status=no, titlebar=no, fullscreen=no, toolbar=no"),c.newWindow.onload=function(){c.newWindow.document.title=c.me._order.status.name+" Order "+c.me._order.orderNo,c.newWindow.focus(),!0!==c.viewOnly&&c.newWindow.print()},c.me},openDocketPrintPage:function(a){var b={};return b.me=this,b.pdf=a||0,b.newWindow=window.open("/printdocket/order/"+b.me._order.id+".html?pdf="+parseInt(b.pdf),b.me._order.status.name+" Order "+b.me._order.orderNo,"width=1300, location=no, scrollbars=yes, menubar=no, status=no, titlebar=no, fullscreen=no, toolbar=no"),b.newWindow.onload=function(){b.newWindow.document.title=b.me._order.status.name+" Order "+b.me._order.orderNo,b.newWindow.focus(),b.newWindow.print()},b.me},_sendEmail:function(a){var b={};if(b.me=this,b.confirmDiv=$(a).up(".confirm-div"),b.confirmDiv.getElementsBySelector(".msg").each(function(a){a.remove()}),b.data=b.me._pageJs._collectFormData(b.confirmDiv,"confirm-email"),null!==b.data)return b.data.orderId=b.me._order.id,b.me._pageJs.postAjax(OrderBtnsJs.SEND_EMAIL_CALLBACK_ID,b.data,{onLoading:function(){b.me._signRandID(a),jQuery("#"+a.id).button("loading")},onSuccess:function(a,c){try{if(b.result=b.me._pageJs.getResp(c,!1,!0),!b.result||!b.result.item)return;b.confirmDiv.update('<h4 class="text-success">Email Successfully added into the Message Queue. Will be sent within a minute</h4>'),setTimeout(function(){b.me._pageJs.hideModalBox()},2e3)}catch(a){b.confirmDiv.insert({top:new Element("h4",{class:"msg"}).update(new Element("span",{class:"label label-danger"}).update(a))})}},onComplete:function(){jQuery("#"+a.id).button("reset")}}),b.me},_getFormGroup:function(a,b){return new Element("div",{class:"form-group"}).insert({bottom:new Element("label",{class:"control-label"}).update(a)}).insert({bottom:b.addClassName("form-control")})},_showEmailPanel:function(a){var b={};return b.me=this,b.newDiv=new Element("div",{class:"confirm-div"}).insert({bottom:new Element("div").insert({bottom:b.me._getFormGroup("Do you want to send an email to this address:",new Element("input",{value:b.me._order.customer.email,"confirm-email":"emailAddress",required:!0,placeholder:"The email to send to. WIll NOT update the customer's email with this."}))})}).insert({bottom:new Element("div").insert({bottom:b.me._getFormGroup(1==jQuery("#storeId").attr("value")?"Reply to address (default is sales@budgetpc.com.au):":"Reply to address (default is sales.heatherton@budgetpc.com.au):",new Element("input",{value:1==jQuery("#storeId").attr("value")?"sales@budgetpc.com.au":"sales.heatherton@budgetpc.com.au","confirm-email":"replyEmailAddress",required:!0,placeholder:"The email address that you want the customer to reply to."}))})}).insert({bottom:new Element("div").insert({bottom:new Element("em").insert({bottom:new Element("small").update("The above email will be used to send the email to. WIll NOT update the customer's email with this.")})})}).insert({bottom:new Element("div").insert({bottom:b.me._getFormGroup("Something you want to say:",new Element("textarea",{"confirm-email":"emailBody",style:"height:300px"}))})}).insert({bottom:new Element("div",{class:"text-right"}).insert({bottom:new Element("span",{class:"btn btn-default pull-left"}).update("CANCEL").observe("click",function(){b.me._pageJs.hideModalBox()})}).insert({bottom:new Element("span",{class:"btn btn-primary","data-loading-text":"Sending ..."}).update("Yes, send this "+b.me._order.type+" to this email address").observe("click",function(){b.me._sendEmail(this)})})}),b.me._pageJs.showModalBox("<strong>Confirm Email Address:</strong>",b.newDiv),b.me},getBtnsDiv:function(){var a={};return a.me=this,a.newDiv=new Element("div",{class:"order-btns-div"}).insert({bottom:new Element("div",{class:"btn-group btn-group-xs visible-xs visible-md visible-sm visible-lg"}).insert({bottom:new Element("span",{class:"btn btn-info"}).insert({bottom:new Element("span",{class:"hidden-xs hidden-sm"}).update("Print ")}).insert({bottom:new Element("span",{class:"glyphicon glyphicon-print"})}).observe("click",function(){a.me.openOrderPrintPage(OrderBtnsJs.PRINT_TYPE.PDF)})}).insert({bottom:new Element("span",{class:"btn btn-info dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"}).insert({bottom:new Element("span",{class:"caret"})})}).insert({bottom:new Element("ul",{class:"dropdown-menu",role:"menu"}).insert({bottom:new Element("li").insert({bottom:new Element("a",{href:"javascript: void(0);"}).insert({bottom:new Element("span").update("Print PDF ")}).insert({bottom:new Element("span",{class:"fa fa-file-pdf-o"})}).observe("click",function(){a.me.openOrderPrintPage(OrderBtnsJs.PRINT_TYPE.PDF)})})}).insert({bottom:new Element("li").insert({bottom:new Element("a",{href:"javascript: void(0);"}).insert({bottom:new Element("span").update("Print HTML")}).insert({bottom:new Element("span",{class:"glyphicon glyphicon-print"})}).observe("click",function(){a.me.openOrderPrintPage(OrderBtnsJs.PRINT_TYPE.HTML)})})}).insert({bottom:new Element("li").insert({bottom:new Element("a",{href:"javascript: void(0);"}).insert({bottom:new Element("span").update("View HTML")}).insert({bottom:new Element("span",{class:"glyphicon glyphicon-list-alt"})}).observe("click",function(){a.me.openOrderPrintPage(OrderBtnsJs.PRINT_TYPE.HTML,!0)})})}).insert({bottom:new Element("li",{class:"divider"})}).insert({bottom:new Element("li").insert({bottom:new Element("a",{href:"javascript: void(0);"}).insert({bottom:new Element("span").update("Print Delivery Docket ")}).insert({bottom:new Element("span",{class:"fa fa-file-pdf-o"})}).observe("click",function(){a.me.openDocketPrintPage(OrderBtnsJs.PRINT_TYPE.PDF)})})}).insert({bottom:new Element("li").insert({bottom:new Element("a",{href:"javascript: void(0);"}).insert({bottom:new Element("span").update("Print Delivery Docket ")}).insert({bottom:new Element("span",{class:"glyphicon glyphicon-list-alt"})}).observe("click",function(){a.me.openDocketPrintPage(OrderBtnsJs.PRINT_TYPE.HTML)})})})})}).insert({bottom:new Element("div",{class:"btn-group btn-group-xs visible-xs visible-md visible-sm visible-lg"}).setStyle("margin-left: 3px;").insert({bottom:new Element("span",{class:"btn btn-success"}).insert({bottom:new Element("span",{class:"hidden-xs hidden-sm"}).update("POS ")}).insert({bottom:new Element("span",{class:"fa fa-print"})}).observe("click",function(){a.me.openOrderPrintPage(OrderBtnsJs.PRINT_TYPE.POS)})})}).insert({bottom:new Element("div",{class:"btn-group btn-group-xs visible-xs visible-md visible-sm visible-lg"}).setStyle("margin-left: 3px;").insert({bottom:new Element("span",{class:"btn btn-primary"}).insert({bottom:new Element("span",{class:"hidden-xs hidden-sm"}).update("Email ")}).insert({bottom:new Element("span",{class:"fa fa-envelope"})}).observe("click",function(){a.me._showEmailPanel(this)})})}).insert({bottom:new Element("div",{class:"btn-group btn-group-xs visible-xs visible-md visible-sm visible-lg"}).setStyle("margin-left: 3px;").insert({bottom:new Element("a",{class:"btn btn-warning",href:"/order/new.html?cloneorderid="+a.me._order.id,target:"_BLANK"}).update("Clone")})}),a.newDiv}};