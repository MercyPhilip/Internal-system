var BPCPageJs=new Class.create;BPCPageJs.prototype={modalId:"page_modal_box_id",_htmlIDs:{},_ajaxRequest:null,callbackIds:{},initialize:function(){},setCallbackId:function(e,t){return this.callbackIds[e]=t,this},getCallbackId:function(e){if(void 0===this.callbackIds[e]||null===this.callbackIds[e])throw"Callback ID is not set for:"+e;return this.callbackIds[e]},setHTMLID:function(e,t){var a={};return a.me=this,a.me._htmlIDs[e]=t,a.me},getHTMLID:function(e){var t={};return t.me=this,t.me._htmlIDs[e]},getFormGroup:function(e,t,a){var r={};return r.me=this,r.withFormControlClass=a||!1,r.newDiv=new Element("div",{"class":"form-group"}),e&&r.newDiv.insert({bottom:e.addClassName("control-label")}),t&&(r.withFormControlClass===!0&&t.addClassName("form-control"),r.newDiv.insert({bottom:t})),r.newDiv},postAjax:function(e,t,a,r){var o={};return o.me=this,o.me._ajaxRequest=new Prado.CallbackRequest(e,a),o.me._ajaxRequest.setCallbackParameter(t),o.timeout=r||3e4,o.timeout<3e4&&(o.timeout=3e4),o.me._ajaxRequest.setRequestTimeOut(o.timeout),o.me._ajaxRequest.dispatch(),o.me._ajaxRequest},abortAjax:function(){null!==tmp.me._ajaxRequest&&tmp.me._ajaxRequest.abort()},getResp:function(e,t,a){var r={};if(r.expectNonJSONResult=t!==!0?!1:!0,r.result=e,r.expectNonJSONResult===!0)return r.result;if(r.result&&r.result.isJSON()){if(r.result=r.result.evalJSON(),0!==r.result.errors.size()){if(r.error="Error: \n\n"+r.result.errors.join("\n"),a===!0)throw r.error;return alert(r.error)}return r.result.resultData}},getCurrency:function(e,t,a,r,o){var n={};return n.decimal=isNaN(a=Math.abs(a))?2:a,n.dollar=void 0==t?"$":t,n.decimalPoint=void 0==r?".":r,n.thousandPoint=void 0==o?",":o,n.sign=0>e?"-":"",n.Int=parseInt(e=Math.abs(+e||0).toFixed(n.decimal))+"",n.j=(n.j=n.Int.length)>3?n.j%3:0,n.dollar+n.sign+(n.j?n.Int.substr(0,n.j)+n.thousandPoint:"")+n.Int.substr(n.j).replace(/(\d{3})(?=\d)/g,"$1"+n.thousandPoint)+(n.decimal?n.decimalPoint+Math.abs(e-n.Int).toFixed(n.decimal).slice(2):"")},getValueFromCurrency:function(e){return e?(e+"").replace(/\s*/g,"").replace(/\$/g,"").replace(/,/g,""):""},keydown:function(e,t,a,r){var o={};return o.keyValue=r?r:13,e.which&&e.which==o.keyValue||e.keyCode&&e.keyCode==o.keyValue?("function"==typeof t&&t(),!1):("function"==typeof a&&a(),!0)},getAlertBox:function(e,t){return new Element("div",{"class":"alert alert-dismissible",role:"alert"}).insert({bottom:new Element("button",{"class":"close","data-dismiss":"alert"}).insert({bottom:new Element("span",{"aria-hidden":"true"}).update("&times;")}).insert({bottom:new Element("span",{"class":"sr-only"}).update("Close")})}).insert({bottom:new Element("strong").update(e)}).insert({bottom:t})},_signRandID:function(e){return e.id||(e.id="input_"+String.fromCharCode(65+Math.floor(26*Math.random()))+Date.now()),this},_markFormGroupError:function(e,t){var a={};return a.me=this,e.up(".form-group")&&(e.store("clearErrFunc",function(t){e.up(".form-group").removeClassName("has-error"),jQuery("#"+e.id).tooltip("hide").tooltip("destroy").show()}).up(".form-group").addClassName("has-error"),a.me._signRandID(e),jQuery("#"+e.id).tooltip({trigger:"manual",placement:"auto",container:"body",placement:"bottom",html:!0,title:t,content:t}).tooltip("show"),$(e).observe("change",function(){a.func=$(e).retrieve("clearErrFunc"),"function"==typeof a.func&&a.func()})),a.me},_collectFormData:function(e,t,a){var r={};return r.me=this,r.data={},r.hasError=!1,$(e).getElementsBySelector("["+t+"]").each(function(e){r.groupIndexName=a?e.readAttribute(a):null,r.fieldName=e.readAttribute(t),e.hasAttribute("required")&&$F(e).blank()&&(r.me._markFormGroupError(e,"This is requried"),r.hasError=!0),r.itemValue="checkbox"!==e.readAttribute("type")?$F(e):$(e).checked,(e.hasAttribute("validate_currency")||e.hasAttribute("validate_number"))&&(null===r.me.getValueFromCurrency(r.itemValue).match(/^(-)?\d+(\.\d{1,4})?$/)&&(r.me._markFormGroupError(e,e.hasAttribute("validate_currency")?e.readAttribute("validate_currency"):e.hasAttribute("validate_number")),r.hasError=!0),r.value=r.me.getValueFromCurrency(r.itemValue)),null!==r.groupIndexName&&void 0!==r.groupIndexName?(r.data[r.groupIndexName]||(r.data[r.groupIndexName]={}),r.data[r.groupIndexName][r.fieldName]=r.itemValue):r.data[r.fieldName]=r.itemValue}),r.hasError===!0?null:r.data},showModalBox:function(e,t,a,r,o){var n={};return n.me=this,n.isSM=a===!0?!0:!1,n.footer=r||null,$(n.me.modalId)?(n.modal=jQuery("#"+n.me.modalId),n.dialogDiv=n.modal.find(".modal-dialog").removeClass("modal-sm").removeClass("modal-lg").addClass(n.isSM===!0?"modal-sm":"modal-lg"),n.modal.find(".modal-title").html(e),n.modal.find(".modal-body").html(t),n.modal.find(".modal-footer").length>0?null!==n.footer?n.modal.find(".modal-footer").html(n.footer):n.modal.find(".modal-footer").remove():null!==n.footer&&jQuery('<div class="modal-footer"></div>').html(n.footer).appendTo(n.dialogDiv.find(".modal-content"))):(n.newBox=new Element("div",{id:n.me.modalId,"class":"modal",tabindex:"-1",role:"dialog","aria-hidden":"true","aria-labelledby":"page-modal-box"}).insert({bottom:new Element("div",{"class":"modal-dialog "+(n.isSM===!0?"modal-sm":"modal-lg")}).insert({bottom:new Element("div",{"class":"modal-content"}).insert({bottom:new Element("div",{"class":"modal-header"}).insert({bottom:new Element("div",{"class":"close",type:"button","data-dismiss":"modal"}).insert({bottom:new Element("span",{"aria-hidden":"true"}).update("&times;")})}).insert({bottom:new Element("strong",{"class":"modal-title"}).update(e)})}).insert({bottom:new Element("div",{"class":"modal-body"}).update(t)}).insert({bottom:null===n.footer?"":new Element("div",{"class":"modal-footer"}).update(n.footer)})})}),$$("body")[0].insert({bottom:n.newBox}),n.modal=jQuery("#"+n.me.modalId),o&&"object"==typeof o&&$H(o).each(function(e){n.modal.on(e.key,e.value)})),n.modal.hasClass("in")||n.modal.modal().show(),n.me},hideModalBox:function(){var e={};return e.me=this,jQuery("#"+e.me.modalId).modal("hide"),e.me},getLoadingImg:function(){return Element("span",{"class":"loading-img fa fa-refresh fa-5x fa-spin"})},loadUTCTime:function(e){var t={};return t.strings=e.strip().split(" "),t.dateStrings=t.strings[0].split("-"),t.timeStrings=t.strings[1].split(":"),new Date(Date.UTC(t.dateStrings[0],1*t.dateStrings[1]-1,t.dateStrings[2],t.timeStrings[0],t.timeStrings[1],t.timeStrings[2]))},observeClickNDbClick:function(e,t,a){var r={};return r.me=this,$(e).observe("click",function(r){$(e).retrieve("alreadyclicked")===!0?($(e).store("alreadyclicked",!1),$(e).retrieve("alreadyclickedTimeout")&&clearTimeout($(e).retrieve("alreadyclickedTimeout")),"function"==typeof a&&a(r)):($(e).store("alreadyclicked",!0),$(e).store("alreadyclickedTimeout",setTimeout(function(){$(e).store("alreadyclicked",!1),"function"==typeof t&&t(r)},300)))}),r.me},getUrlParam:function(e){var t={};t.me=this,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=a.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))}};